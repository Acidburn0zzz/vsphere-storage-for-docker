{
    "docs": [
        {
            "location": "/",
            "text": "vSphere Docker Volume Service - Introduction\n\u00b6\n\n\nvSphere Docker Volume Service enables you to run stateful containerized applications on top of VMware vSphere. \n\n\nIt is designed to meet the needs of Enterprise IT and application developers and offers the following benefits:\n\n\n\n\nProvide proven persistent shared storage:\n You can now use any VMware supported enterprise class storage backed by vSAN, VMFS, NFS, etc. \n\n\nEnable Multitenancy, Security and Access Control:\n vSphere Admins can effortlessly set access permissions for shared storage across hosts, datastores and VMs from a single location\n\n\nOperational Consistency and Simplicity:\n Zero Configuration, zero credential management. It as easy to deploy and manage\n\n\nSelf-service Operations\n: Use docker APIs to manage volume lifecycle while maintaining admin control over consumption \n\n\n\n\nThis service is integrated with \nDocker Volume Plugin framework\n. It does not need credential management or configuration management. \n\n\n\n\n\nFeedback\n\u00b6\n\n\nOn going work and feature requests are tracked using \nGitHub Issues\n. Please feel free to file \nissues\n or email \ncna-storage@vmware.com\n\n\nDocumentation Version\n\u00b6\n\n\nThe documentation here is for the latest release. The current master documentation can be found in markdown format in the \ndocumentation folder\n. For older releases, browse to \nreleases\n select the release, click on the tag for the release and browse the docs folder.",
            "title": "Home"
        },
        {
            "location": "/#vsphere-docker-volume-service-introduction",
            "text": "vSphere Docker Volume Service enables you to run stateful containerized applications on top of VMware vSphere.   It is designed to meet the needs of Enterprise IT and application developers and offers the following benefits:   Provide proven persistent shared storage:  You can now use any VMware supported enterprise class storage backed by vSAN, VMFS, NFS, etc.   Enable Multitenancy, Security and Access Control:  vSphere Admins can effortlessly set access permissions for shared storage across hosts, datastores and VMs from a single location  Operational Consistency and Simplicity:  Zero Configuration, zero credential management. It as easy to deploy and manage  Self-service Operations : Use docker APIs to manage volume lifecycle while maintaining admin control over consumption    This service is integrated with  Docker Volume Plugin framework . It does not need credential management or configuration management.",
            "title": "vSphere Docker Volume Service - Introduction"
        },
        {
            "location": "/#feedback",
            "text": "On going work and feature requests are tracked using  GitHub Issues . Please feel free to file  issues  or email  cna-storage@vmware.com",
            "title": "Feedback"
        },
        {
            "location": "/#documentation-version",
            "text": "The documentation here is for the latest release. The current master documentation can be found in markdown format in the  documentation folder . For older releases, browse to  releases  select the release, click on the tag for the release and browse the docs folder.",
            "title": "Documentation Version"
        },
        {
            "location": "/user-guide/install/",
            "text": "Introduction\n\u00b6\n\n\nvSphere Docker Volume Service is simple to install. It has zero configuration and and zero credential management post install.\n\n\nTagged releases\n include the software bundles to install on ESX and on the VM.\n\n\nIn addition the \nmake build-all\n will generate the packages.\n\n\nInstall on ESX\n\u00b6\n\n\nVIB\n and \nOffline Depot\n are the packages built to install the backend for the service on ESX. The backend can be installed using esxcli or vmware tools such as \nVUM\n\n\nHere is a demo show casing esxcli\n\n\n\n\n\nInstall on VM\n\u00b6\n\n\nWe currently package the service as a RPM and Deb package. This is to be able to start the service before Docker engine starts. We will also support Docker plugin framework once it is ready.\n\n\nHere is a demo showcasing the install in a Photon OS VM.",
            "title": "Installation and Deployment"
        },
        {
            "location": "/user-guide/install/#introduction",
            "text": "vSphere Docker Volume Service is simple to install. It has zero configuration and and zero credential management post install.  Tagged releases  include the software bundles to install on ESX and on the VM.  In addition the  make build-all  will generate the packages.",
            "title": "Introduction"
        },
        {
            "location": "/user-guide/install/#install-on-esx",
            "text": "VIB  and  Offline Depot  are the packages built to install the backend for the service on ESX. The backend can be installed using esxcli or vmware tools such as  VUM  Here is a demo show casing esxcli",
            "title": "Install on ESX"
        },
        {
            "location": "/user-guide/install/#install-on-vm",
            "text": "We currently package the service as a RPM and Deb package. This is to be able to start the service before Docker engine starts. We will also support Docker plugin framework once it is ready.  Here is a demo showcasing the install in a Photon OS VM.",
            "title": "Install on VM"
        },
        {
            "location": "/features/tenancy/",
            "text": "Tenancy\n\u00b6\n\n\nMulti-tenancy is an architecture in which a single instance of a software application serves multiple customers or \u201ctenants.\u201d Tenants can be used to provide isolation between independent groups in shared environments, where multiple groups are using some common infrastructure i.e. compute, storage, network, etc. With tenancy, you can achieve isolation of resources of one tenant from other tenants. \n\n\nFor the vSphere Docker Volume Service, Multi-tenancy is implemented by assigning a Datastore and VMs to a tenant.  A tenant can be granted access to create, delete or mount volumes on a specific datastore. VMs assigned to a tenant can then execute Docker volume APIs on an assigned datastores. Within a datastore multiple tenants can store their Docker volumes. A tenant cannot access volumes created by a different tenant i.e. tenants have their own independent namespace, even if tenants share datastores. VMs cannot be shared between tenants.\n\n\nKey attributes of tenancy:\n\n\n\n\nvSphere Administrator can define group of one or more Docker Host (VM) as\nTenant\n\n\nDocker Host (VM) can be a member of one and only one Tenant.\n\n\nvSphere Administrator can grant tenant privileges & set resource consumption\n\n\nTenants can share the same underlying storage but preserve volume namespace isolation. \nlimits at granularity of datastore.\n\n\n\n\nAdmin CLI\n\u00b6\n\n\nTenants can be created and managed via the \nAdmin CLI\n\n\nDefault tenant\n\u00b6\n\n\nWhen a VM which does not belong to any tenant issues a request to vmdk_ops, this VM will be assumed to be in _DEFAULT tenant, and will get privileges \nassociated with this tenant. _DEFAULT tenant will be automatically created by system post install, so by default vmdk_ops will support request from \nany VM , thus maintaining backward compatibility and simplicity of installation.An admin can remove this tenant or modify privileges, thus locking \ndown vmdk_ops to serve only explicitly configured VMs.\n\n\nDefault privileges\n\u00b6\n\n\nWhen a VM tries to manipulate volumes on a datastore which is not configured,  the system will use _DEFAULT privilege, which is created automatically \nby system post install. This _DEFAULT privilege allows access to ANY datastore by default. An admin can edit or remove this record, thus locking down \nthe functionality to allow access only to explicitly configured datastores. \n\n\nDefault datastore\n\u00b6\n\n\nWhen a VM addresses the volume using short notation (volume_name, without @datastore), all VMs in this tenant will use default datastore to resolve short volume reference (volume_name will actually mean volume_name@default_datastore).\nIf \u201cdefault_datastore\u201d is not set for a tenant, then datastore where the VM resides will be used as \u201cdefault_datastore\u201d.\n\n\nReferences\n\u00b6\n\n\n\n\nDesign Spec for tenancy",
            "title": "Tenancy"
        },
        {
            "location": "/features/tenancy/#tenancy",
            "text": "Multi-tenancy is an architecture in which a single instance of a software application serves multiple customers or \u201ctenants.\u201d Tenants can be used to provide isolation between independent groups in shared environments, where multiple groups are using some common infrastructure i.e. compute, storage, network, etc. With tenancy, you can achieve isolation of resources of one tenant from other tenants.   For the vSphere Docker Volume Service, Multi-tenancy is implemented by assigning a Datastore and VMs to a tenant.  A tenant can be granted access to create, delete or mount volumes on a specific datastore. VMs assigned to a tenant can then execute Docker volume APIs on an assigned datastores. Within a datastore multiple tenants can store their Docker volumes. A tenant cannot access volumes created by a different tenant i.e. tenants have their own independent namespace, even if tenants share datastores. VMs cannot be shared between tenants.  Key attributes of tenancy:   vSphere Administrator can define group of one or more Docker Host (VM) as\nTenant  Docker Host (VM) can be a member of one and only one Tenant.  vSphere Administrator can grant tenant privileges & set resource consumption  Tenants can share the same underlying storage but preserve volume namespace isolation. \nlimits at granularity of datastore.",
            "title": "Tenancy"
        },
        {
            "location": "/features/tenancy/#admin-cli",
            "text": "Tenants can be created and managed via the  Admin CLI",
            "title": "Admin CLI"
        },
        {
            "location": "/features/tenancy/#default-tenant",
            "text": "When a VM which does not belong to any tenant issues a request to vmdk_ops, this VM will be assumed to be in _DEFAULT tenant, and will get privileges \nassociated with this tenant. _DEFAULT tenant will be automatically created by system post install, so by default vmdk_ops will support request from \nany VM , thus maintaining backward compatibility and simplicity of installation.An admin can remove this tenant or modify privileges, thus locking \ndown vmdk_ops to serve only explicitly configured VMs.",
            "title": "Default tenant"
        },
        {
            "location": "/features/tenancy/#default-privileges",
            "text": "When a VM tries to manipulate volumes on a datastore which is not configured,  the system will use _DEFAULT privilege, which is created automatically \nby system post install. This _DEFAULT privilege allows access to ANY datastore by default. An admin can edit or remove this record, thus locking down \nthe functionality to allow access only to explicitly configured datastores.",
            "title": "Default privileges"
        },
        {
            "location": "/features/tenancy/#default-datastore",
            "text": "When a VM addresses the volume using short notation (volume_name, without @datastore), all VMs in this tenant will use default datastore to resolve short volume reference (volume_name will actually mean volume_name@default_datastore).\nIf \u201cdefault_datastore\u201d is not set for a tenant, then datastore where the VM resides will be used as \u201cdefault_datastore\u201d.",
            "title": "Default datastore"
        },
        {
            "location": "/features/tenancy/#references",
            "text": "Design Spec for tenancy",
            "title": "References"
        },
        {
            "location": "/features/vsan-policy/",
            "text": "What is VSAN\n\u00b6\n\n\nVSAN\n is a shared storage (all ESX nodes in a cluster can access the same VSAN store), hyper-converged (VSAN is integrated into vSphere and runs on the same hardware nodes that vSphere manages), flash optimized storage offering from VMware.\n\n\nVSAN Policy\n\u00b6\n\n\nVSAN provides software defined storage and for each storage object it can specify the policy which controls attributes such as Number of failures to be tolerated.\n\n\nMapping Docker volumes to VSAN objects with policy\n\u00b6\n\n\nUsing the Admin CLI an IT admin can create the policies that can be consumed by Docker volumes. The Docker admin can then create a volume using the policies available.\n\n\nvmdkops-admin policy create --name=myPolicy --content=\"string\"\ndocker volume create --driver=vsphere --name=MyVol -o vsan-policy-name=myPolicy",
            "title": "VSAN Policy"
        },
        {
            "location": "/features/vsan-policy/#what-is-vsan",
            "text": "VSAN  is a shared storage (all ESX nodes in a cluster can access the same VSAN store), hyper-converged (VSAN is integrated into vSphere and runs on the same hardware nodes that vSphere manages), flash optimized storage offering from VMware.",
            "title": "What is VSAN"
        },
        {
            "location": "/features/vsan-policy/#vsan-policy",
            "text": "VSAN provides software defined storage and for each storage object it can specify the policy which controls attributes such as Number of failures to be tolerated.",
            "title": "VSAN Policy"
        },
        {
            "location": "/features/vsan-policy/#mapping-docker-volumes-to-vsan-objects-with-policy",
            "text": "Using the Admin CLI an IT admin can create the policies that can be consumed by Docker volumes. The Docker admin can then create a volume using the policies available.  vmdkops-admin policy create --name=myPolicy --content=\"string\"\ndocker volume create --driver=vsphere --name=MyVol -o vsan-policy-name=myPolicy",
            "title": "Mapping Docker volumes to VSAN objects with policy"
        },
        {
            "location": "/features/vcenter/",
            "text": "vCenter Integration\n\u00b6\n\n\nvCenter Plugin integration is under development.\nPlease file any requirements as \nGitHub Issues\n or email  \ncna-storage@vmware.com",
            "title": "Integration with vCenter"
        },
        {
            "location": "/features/vcenter/#vcenter-integration",
            "text": "vCenter Plugin integration is under development.\nPlease file any requirements as  GitHub Issues  or email   cna-storage@vmware.com",
            "title": "vCenter Integration"
        },
        {
            "location": "/user-guide/docker-volume-cli/",
            "text": "Using the Service in Docker\n\n\nDocker volume create options\n\n\nsize\n\n\nvsan-policy-name (vSphere only)\n\n\ndiskformat (vSphere only)\n\n\nattach_as (vSphere only)\n\n\naccess (vSphere only)\n\n\nfstype\n\n\nclone-from (vSphere only)\n\n\nflavor (Photon only)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUsing the Service in Docker\n\u00b6\n\n\nThe service works with existing Docker volume commands.\n\n\n\n\nDocker volume create\n\n\nDocker volume inspect\n\n\nDocker volume ls\n\n\nDocker volume rm\n\n\n\n\nThe Docker volume commands are supported for both the vSphere and Photon platforms with minor differences in capabilities. Features that are specific to either of the platforms are mentioned explicitly below.\n\n\n\nDocker volume create options\n\u00b6\n\n\nsize\n\u00b6\n\n\ndocker volume create --driver=<vsphere/photon> --name=MyVolume -o size=10gb\n\n\n\n\nThe volume units can be \nmb, gb and tb\n\n\nThe default volume size is 100mb\n\n\nvsan-policy-name (vSphere only)\n\u00b6\n\n\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o vsan-policy-name=allflash\n\n\n\n\nPolicy needs to be created via the vmdkops-admin-cli. Once policy is created, it can be addressed during create by passing the \n-o vsan-policy-name\n flag.\n\n\ndiskformat (vSphere only)\n\u00b6\n\n\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o diskformat=zeroedthick\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o diskformat=thin\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o diskformat=eagerzeroedthick\n\n\n\n\nDocker volumes are backed by VMDKs. VMDKs support multiple \ntypes\n\n\nCurrently the following are supported\n\n\n\n\nThick Provision Lazy Zeroed (\nzeroedthick\n)\n\n\nThin Provision (\nthin\n)\n\n\nThick Provision Eager Zeroed (\neagerzeroedthick\n)\n\n\n\n\nattach_as (vSphere only)\n\u00b6\n\n\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o attach_as=independent_persistent\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o attach_as=persistent\n\n\n\n\nDocker volumes are backed by VMDKs. VMDKs are attached to the VM in which Docker is requesting for a volume during Docker run. VMDKs can be attached in \ndifferent modes.\n\n\nCurrently the following are supported\n\n\n\n\npersistent\n: If the VMDK is attached as persistent it will be part of a VM snapshot. If a VM snapshot has been taken while the Docker volume is attached to a VM, the Docker volume then continues to be attached to the VM that was snapshotted.\n\n\nindependent_persistent\n: If the VMDK is attached as independent_persistent it will not be part of a VM snapshot. The Docker volume can be attached to any VM that can access the datastore independent of snapshots.\n\n\n\n\naccess (vSphere only)\n\u00b6\n\n\ndocker volume create --driver=vsphere --name=MyVolume -o access=read-only -o diskformat=thin\ndocker volume create --driver=vsphere --name=MyVolume -o access=read-write -o diskformat=thin (default)\n\n\n\n\nThe access mode determines if the volume is modifiable by containers in a VM. The access mode allows to first create a volume with write access and initialize it with binary images, libraries (for exmple), and subsequently change the access to \u201cread-only\u201d (via the admin CLI). Thereby, creating content sharable by all containers in a VM.\n\n\nfstype\n\u00b6\n\n\ndocker volume create --driver=<vsphere/photon> --name=MyVolume -o size=10gb -o fstype=xfs\ndocker volume create --driver=<vsphere/photon> --name=MyVolume -o size=10gb -o fstype=ext4 (default)\n\n\n\n\nSpecifies which filesystem will be created on the new volume. vSphere Docker Volume Service will search for a existing /sbin/mkfs.\nfstype\n on the docker host to create the filesystem, and if not found it will return a list of filesystems for which it has found a corresponding mkfs. The specified filesystem must be supported by the running kernel and support labels (-L flag for mkfs). Defaults to ext4 if not specified. \n\n\nclone-from (vSphere only)\n\u00b6\n\n\ndocker volume create --driver=vsphere --name=CloneVolume -o clone-from=MyVolume -o access=read-only\ndocker volume create --driver=vsphere --name=CloneVolume -o clone-from=MyVolume -o diskformat=thin (default)\n\n\n\n\nSpecifies a volume to be cloned when creating a new volume. The created clone is completely independent from the original volume and will inherit the same options, which can be changed with the exception of the size and fstype.\n\n\nflavor (Photon only)\n\u00b6\n\n\n\u2026\ndocker volume create \u2013driver=vsphere \u2013name=CloneVolume -o flavor=\n\n\u2026\n\n\nThe flavor specifies the name of the persistent disk flavor that must have already been created in the Photon Controller. The flavor indicats the resource limits that are applied to the volume being created.",
            "title": "Basic commands"
        },
        {
            "location": "/user-guide/docker-volume-cli/#using-the-service-in-docker",
            "text": "The service works with existing Docker volume commands.   Docker volume create  Docker volume inspect  Docker volume ls  Docker volume rm   The Docker volume commands are supported for both the vSphere and Photon platforms with minor differences in capabilities. Features that are specific to either of the platforms are mentioned explicitly below.",
            "title": "Using the Service in Docker"
        },
        {
            "location": "/user-guide/docker-volume-cli/#docker-volume-create-options",
            "text": "",
            "title": "Docker volume create options"
        },
        {
            "location": "/user-guide/docker-volume-cli/#size",
            "text": "docker volume create --driver=<vsphere/photon> --name=MyVolume -o size=10gb  The volume units can be  mb, gb and tb  The default volume size is 100mb",
            "title": "size"
        },
        {
            "location": "/user-guide/docker-volume-cli/#vsan-policy-name-vsphere-only",
            "text": "docker volume create --driver=vsphere --name=MyVolume -o size=10gb -o vsan-policy-name=allflash  Policy needs to be created via the vmdkops-admin-cli. Once policy is created, it can be addressed during create by passing the  -o vsan-policy-name  flag.",
            "title": "vsan-policy-name (vSphere only)"
        },
        {
            "location": "/user-guide/docker-volume-cli/#diskformat-vsphere-only",
            "text": "docker volume create --driver=vsphere --name=MyVolume -o size=10gb -o diskformat=zeroedthick\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o diskformat=thin\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o diskformat=eagerzeroedthick  Docker volumes are backed by VMDKs. VMDKs support multiple  types  Currently the following are supported   Thick Provision Lazy Zeroed ( zeroedthick )  Thin Provision ( thin )  Thick Provision Eager Zeroed ( eagerzeroedthick )",
            "title": "diskformat (vSphere only)"
        },
        {
            "location": "/user-guide/docker-volume-cli/#attach_as-vsphere-only",
            "text": "docker volume create --driver=vsphere --name=MyVolume -o size=10gb -o attach_as=independent_persistent\ndocker volume create --driver=vsphere --name=MyVolume -o size=10gb -o attach_as=persistent  Docker volumes are backed by VMDKs. VMDKs are attached to the VM in which Docker is requesting for a volume during Docker run. VMDKs can be attached in  different modes.  Currently the following are supported   persistent : If the VMDK is attached as persistent it will be part of a VM snapshot. If a VM snapshot has been taken while the Docker volume is attached to a VM, the Docker volume then continues to be attached to the VM that was snapshotted.  independent_persistent : If the VMDK is attached as independent_persistent it will not be part of a VM snapshot. The Docker volume can be attached to any VM that can access the datastore independent of snapshots.",
            "title": "attach_as (vSphere only)"
        },
        {
            "location": "/user-guide/docker-volume-cli/#access-vsphere-only",
            "text": "docker volume create --driver=vsphere --name=MyVolume -o access=read-only -o diskformat=thin\ndocker volume create --driver=vsphere --name=MyVolume -o access=read-write -o diskformat=thin (default)  The access mode determines if the volume is modifiable by containers in a VM. The access mode allows to first create a volume with write access and initialize it with binary images, libraries (for exmple), and subsequently change the access to \u201cread-only\u201d (via the admin CLI). Thereby, creating content sharable by all containers in a VM.",
            "title": "access (vSphere only)"
        },
        {
            "location": "/user-guide/docker-volume-cli/#fstype",
            "text": "docker volume create --driver=<vsphere/photon> --name=MyVolume -o size=10gb -o fstype=xfs\ndocker volume create --driver=<vsphere/photon> --name=MyVolume -o size=10gb -o fstype=ext4 (default)  Specifies which filesystem will be created on the new volume. vSphere Docker Volume Service will search for a existing /sbin/mkfs. fstype  on the docker host to create the filesystem, and if not found it will return a list of filesystems for which it has found a corresponding mkfs. The specified filesystem must be supported by the running kernel and support labels (-L flag for mkfs). Defaults to ext4 if not specified.",
            "title": "fstype"
        },
        {
            "location": "/user-guide/docker-volume-cli/#clone-from-vsphere-only",
            "text": "docker volume create --driver=vsphere --name=CloneVolume -o clone-from=MyVolume -o access=read-only\ndocker volume create --driver=vsphere --name=CloneVolume -o clone-from=MyVolume -o diskformat=thin (default)  Specifies a volume to be cloned when creating a new volume. The created clone is completely independent from the original volume and will inherit the same options, which can be changed with the exception of the size and fstype.",
            "title": "clone-from (vSphere only)"
        },
        {
            "location": "/user-guide/docker-volume-cli/#flavor-photon-only",
            "text": "\u2026\ndocker volume create \u2013driver=vsphere \u2013name=CloneVolume -o flavor= \n\u2026  The flavor specifies the name of the persistent disk flavor that must have already been created in the Photon Controller. The flavor indicats the resource limits that are applied to the volume being created.",
            "title": "flavor (Photon only)"
        },
        {
            "location": "/user-guide/datastores/",
            "text": "Consuming multiple data stores\n\u00b6\n\n\nThe service by default creates a volume in the datastore that hosts the VM. Optionally Docker volumes can be provisioned on a specific datastore by directly addressing the datastore when specifying the name in the format <volume name>@<datastore name>",
            "title": "Multiple Datastores"
        },
        {
            "location": "/user-guide/datastores/#consuming-multiple-data-stores",
            "text": "The service by default creates a volume in the datastore that hosts the VM. Optionally Docker volumes can be provisioned on a specific datastore by directly addressing the datastore when specifying the name in the format <volume name>@<datastore name>",
            "title": "Consuming multiple data stores"
        },
        {
            "location": "/user-guide/vsphere-overview/",
            "text": "Docker volumes on ESX\n\u00b6\n\n\nDocker volumes on vSphere are powered by \nVMDKs\n. VMDKs can reside on datastores created on top of varying backends (NFS, SAN, VSAN, vVol). vSphere Docker Volume Service supports high availability for Docker volumes and allows for any VM requesting for the volume to gain access to it. The ability to attach the VMDK(Docker volume) to any VM when paired with a cluster manager such as Swarm allows a persistent container to be highly available.\n\n\nThe VMDKs on ESX are stored on the datastore in a folder that is independent of a VM.",
            "title": "Volume Layout"
        },
        {
            "location": "/user-guide/vsphere-overview/#docker-volumes-on-esx",
            "text": "Docker volumes on vSphere are powered by  VMDKs . VMDKs can reside on datastores created on top of varying backends (NFS, SAN, VSAN, vVol). vSphere Docker Volume Service supports high availability for Docker volumes and allows for any VM requesting for the volume to gain access to it. The ability to attach the VMDK(Docker volume) to any VM when paired with a cluster manager such as Swarm allows a persistent container to be highly available.  The VMDKs on ESX are stored on the datastore in a folder that is independent of a VM.",
            "title": "Docker volumes on ESX"
        },
        {
            "location": "/user-guide/admin-cli/",
            "text": "Introduction\n\n\nTenant\n\n\nHelp\n\n\nCreate\n\n\nHelp\n\n\n\n\n\n\nList\n\n\nHelp\n\n\n\n\n\n\nUpdate\n\n\nHelp\n\n\n\n\n\n\nRemove\n\n\nHelp\n\n\n\n\n\n\nVirtual Machine\n\n\nAdd\n\n\nList\n\n\nRemove\n\n\nHelp\n\n\n\n\n\n\nAccess\n\n\nHelp\n\n\nAdd\n\n\nHelp\n\n\n\n\n\n\nList\n\n\nHelp\n\n\n\n\n\n\nRemove\n\n\nHelp\n\n\n\n\n\n\nSet\n\n\nHelp\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVolume\n\n\nList\n\n\nHelp\n\n\nList All\n\n\nList selected columns\n\n\n\n\n\n\nSet\n\n\n\n\n\n\nPolicy\n\n\nHelp\n\n\nCreate\n\n\nList\n\n\nUpdate\n\n\nRemove\n\n\n\n\n\n\nStatus\n\n\n\n\n\n\n\n\n\n\nIntroduction\n\u00b6\n\n\nWith the vSphere Docker Volume Service, each ESXi host manages multiple VMs, with\neach of them acting as a Docker host. The Docker engine on these hosts communicates with the Docker\nvolume service to create and delete virtual disks (VMDKs), as well as mounts them as Docker\nvolumes. These virtual disks may live on any datastore accessible to the ESXi host and are managed\nby the Docker user via the Docker CLI. However, the Docker CLI is limited in what visibility it can\nprovide to the user. Furthermore, it is desirable that an administrator be able to get a global view\nof all virtual disks created and in use on the host.  For these reasons, an admin CLI has been\ncreated that runs on the ESXi host and that provides access to information not visible from the\nDocker CLI.\n\n\nThe admin cli also enables ESX admins to implement tenancy.\n\n\nThe remainder of this document will describe each admin CLI command and provide examples\nof their usage.\n\n\nTenant\n\u00b6\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant -h\nusage: vmdkops_admin.py tenant [-h] {create,vm,update,access,ls,rm} ...\n\npositional arguments:\n  {create,vm,update,access,ls,rm}\n    create              Create a new tenant\n    vm                  Add, removes and lists VMs in a tenant\n    update              Update an existing tenant\n    access              Add or remove Datastore access and quotas for a tenant\n    ls                  List tenants and the VMs they are applied to\n    rm                  Delete a tenant\n\noptional arguments:\n  -h, --help            show this help message and exit\n\n\n\n\nCreate\n\u00b6\n\n\nA tenant named \u201c_DEFAULT\u201d will be created automatically post install.\n\n\nCreates a new named tenant and optionally assigns VMs. Valid tenant name is only allowed to be \u201c[a-zA-Z0-9_][a-zA-Z0-9_.-]*\u201d\n\n\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create --name=tenant1\ntenant create succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\n3277ad45-e916-4e06-8fd5-381e6090d15b  tenant1\n\n\n\n\nThe tenant to VM association can be done at create time.\n\n\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create --name=tenant1 --vm-list=photon4\ntenant create succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\nc932f2bf-6554-442a-86f6-ec721dd3dced  tenant1                                                photon4\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create -h\nusage: vmdkops_admin.py tenant create [-h] --name NAME\n                                      [--description DESCRIPTION]\n                                      [--vm-list vm1, vm2, ...]\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --name NAME           The name of the tenant\n  --description DESCRIPTION\n                        The description of the tenant\n  --vm-list vm1, vm2, ...\n                        A list of VM names to place in this Tenant\n\n\n\n\nList\n\u00b6\n\n\nList existing tenants, the datastores tenants have access to and the VMs assigned.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\nc932f2bf-6554-442a-86f6-ec721dd3dced  tenant1                                                photon4\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls -h\nusage: vmdkops_admin.py tenant ls [-h]\n\noptional arguments:\n  -h, --help  show this help message and exit\n\n\n\n\nUpdate\n\u00b6\n\n\nUpdate existing tenant. This command allows to update \u201cDescription\u201d and \u201cDefault_datastore\u201d fields, or rename an existing tenant.\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\na11dda75-0632-4fe0-9caa-d2308bf73df7  _DEFAULT  This is a default tenant\n946570fe-9842-491f-a172-426284b36eeb  tenant1                             datastore2         photon4\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant update --name=tenant1 --description=\"New description of tenant1\" --new-name=new-tenant1 --default-datastore=datastore1\ntenant modify succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name         Description                 Default_datastore  VM_list\n------------------------------------  -----------  --------------------------  -----------------  -------\na11dda75-0632-4fe0-9caa-d2308bf73df7  _DEFAULT     This is a default tenant\n946570fe-9842-491f-a172-426284b36eeb  new-tenant1  New description of tenant1  datastore1         photon4\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant update -h\nusage: vmdkops_admin.py tenant update [-h] --name NAME\n                                      [--default-datastore DEFAULT_DATASTORE]\n                                      [--description DESCRIPTION]\n                                      [--new-name NEW_NAME]\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --name NAME           The name of the tenant\n  --default-datastore DEFAULT_DATASTORE\n                        The name of the datastore to be used by default for\n                        volumes placement\n  --description DESCRIPTION\n                        The new description of the tenant\n  --new-name NEW_NAME   The new name of the tenant\n\n\n\n\n\nRemove\n\u00b6\n\n\nRemove a tenant, optionally all volumes for a tenant can be removed as well.\n\n\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant rm --name=tenant1 --remove-volumes\nAll Volumes will be removed\ntenant rm succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant rm -h\nusage: vmdkops_admin.py tenant rm [-h] --name NAME [--remove-volumes]\n\noptional arguments:\n  -h, --help        show this help message and exit\n  --name NAME       The name of the tenant\n  --remove-volumes  BE CAREFUL: Removes this tenant volumes when removing a\n                    tenant\n\n\n\n\n\nVirtual Machine\n\u00b6\n\n\nAdd\n\u00b6\n\n\nAdd a VM to a tenant. A VM can only access the datastores for the tenant it is assigned to.\nVMs can be assigned to only one tenant at a time.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm add --name=tenant1 --vm-list=photon5\ntenant vm add succeeded\n\n\n\n\nList\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm ls --name=tenant1\nUuid                                  Name\n------------------------------------  -------\n564df562-3d58-c99a-e76e-e8792b77ca2d  photon4\n564d4728-f1c7-2029-d01e-51f5e6536cd9  photon5\n\n\n\n\nRemove\n\u00b6\n\n\nRemove a VM from a tenant\u2019s list of VMs. VM will no longer be able to access the volumes created for the tenant.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm rm --name=tenant1 --vm-list=photon5\ntenant vm rm succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm ls --name=tenant1\nUuid                                  Name\n------------------------------------  -------\n564df562-3d58-c99a-e76e-e8792b77ca2d  photon4\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm -h\nusage: vmdkops_admin.py tenant vm [-h] {rm,add,ls} ...\n\npositional arguments:\n  {rm,add,ls}\n    rm         Remove VM(s) from a tenant\n    add        Add a VM(s) to a tenant\n    ls         list VMs in a tenant\n\noptional arguments:\n  -h, --help   show this help message and exit\n\n\n\n\nAccess\n\u00b6\n\n\nChange the access control for a tenant.\nThis includes ability to grant privileges & set resource consumption limits for a datastore.\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access -h\nusage: vmdkops_admin.py tenant access [-h] {rm,add,set,ls} ...\n\npositional arguments:\n  {rm,add,set,ls}\n    rm             Remove all access to a datastore for a tenant\n    add            Add a datastore access for a tenant\n    set            Modify datastore access for a tenant\n    ls             List all access info for a tenant\n\noptional arguments:\n  -h, --help       show this help message and exit\n\n\n\n\nAdd\n\u00b6\n\n\nGrants datastore access to a tenant.\n\n\nThe datastore will be automatically set as \u201cdefault_datastore\u201d for the tenant\nwhen you grant first datastore access for a tenant.\n\n\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=tenant1 --datastore=datastore1  --volume-maxsize=500MB --volume-totalsize=1GB\ntenant access add succeeded\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\nc932f2bf-6554-442a-86f6-ec721dd3dced  tenant1                             datastore1         photon4\n\n\n\n\nThe datastore will be set as \u201cdefault_datastore\u201d for the tenant when you grant datastore access for a tenant with \u201c\u2013default-datastore\u201d flag.\n\n\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=tenant1 --datastore=datastore2  --allow-create --default-datastore --volume-maxsize=500MB --volume-totalsize=1GB\ntenant access add succeeded\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          500.00MB         1.00GB\ndatastore2  True          500.00MB         1.00GB\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\n371a68e3-8c86-467a-a4dc-753f3066ca8a  tenant1                             datastore2         photon4\n\n\n\n\nBy default no \u201callow_create\u201d right is given\n\n\n[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name tenant1 --datastore datastore1\ntenant access add succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  False         500.00MB         1.00GB\n\n\n\n\n\u201callow_create\u201d right is given when you run the command with \u201c\u2013allow-create\u201d flag.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=tenant1 --datastore=datastore1 --allow-create --volume-maxsize=500MB --volume-totalsize=1GB\ntenant access add succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          500.00MB         1.00GB\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add -h\nusage: vmdkops_admin.py tenant access add [-h]\n                                          [--volume-totalsize Num{MB,GB,TB} - e.g. 2TB]\n                                          [--volume-maxsize Num{MB,GB,TB} - e.g. 2TB]\n                                          [--allow-create] --name NAME\n                                          [--default-datastore] --datastore\n                                          DATASTORE\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --volume-totalsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum total size of all volume that can be created\n                        on the datastore for this tenant\n  --volume-maxsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum size of the volume that can be created\n  --allow-create        Allow create and delete on the datastore if set to True\n  --name NAME           The name of the tenant\n  --default-datastore   Mark datastore as a default datastore for this tenant\n  --datastore DATASTORE\n                        Datastore which access is controlled\n\n\n\n\n\nList\n\u00b6\n\n\nList the current access control granted to a tenant.\n\n\nWhen displaying the result keep in mind:\n\n\n\n\nFor capacity Unset indicates no limits\n\n\n\n\n[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          Unset            Unset\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls -h\nusage: vmdkops_admin.py tenant access ls [-h] --name NAME\n\noptional arguments:\n  -h, --help   show this help message and exit\n  --name NAME  The name of the tenant\n\n\n\n\nRemove\n\u00b6\n\n\nRemove access to a datastore for a tenant.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access rm --name=tenant1 --datastore=datastore1\ntenant access rm succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore  Allow_create  Max_volume_size  Total_size\n---------  ------------  ---------------  ----------\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access rm -h\nusage: vmdkops_admin.py tenant access rm [-h] --name NAME --datastore\n                                         DATASTORE\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --name NAME           The name of the tenant\n  --datastore DATASTORE\n                        Datstore which access is controlled\n\n\n\n\n\nSet\n\u00b6\n\n\nSet command allows to change the existing access control in place for a tenant.\n\n\nSample:\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  False         500.00MB         1.00GB\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access set --name=tenant1 --datastore=datastore1 --allow-create --volume-maxsize=1000MB --volume-totalsize=2GB\ntenant access set succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          1000.00MB        2.00GB\n\n\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access set -h\nusage: vmdkops_admin.py tenant access set [-h]\n                                          [--volume-totalsize Num{MB,GB,TB} - e.g. 2TB]\n                                          --name NAME\n                                          [--volume-maxsize Num{MB,GB,TB} - e.g. 2TB]\n                                          [--allow-create Value{True|False} e.g. True]\n                                          --datastore DATASTORE\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --volume-totalsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum total size of all volume that can be created\n                        on the datastore for this tenant\n  --name NAME           Tenant name\n  --volume-maxsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum size of the volume that can be created\n  --allow-create Value{True|False} - e.g. True\n                        Allow create and delete on datastore if set to True;\n                        disallow create and delete on datastore if set to\n                        False\n  --datastore DATASTORE\n                        Datastore name\n\n\n\n\n\nVolume\n\u00b6\n\n\nList\n\u00b6\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py ls -h\nusage: vmdkops_admin.py ls [-h] [-c Col1,Col2,...]\n\noptional arguments:\n  -h, --help        show this help message and exit\n  -c Col1,Col2,...  Display selected columns: Choices = ['volume',\n                    'datastore', 'created-by', 'created', 'attached-to',\n                    'policy', 'capacity', 'used']\n\n\n\n\nList All\n\u00b6\n\n\nList all properties for all Docker volumes that exist on datastores accessible to the host.\n\n\nVolume          Datastore      Created By VM  Created                   Attached To VM  Policy          Capacity  Used      Filesystem Type  Access      Attach As\n--------------  -------------  -------------  ------------------------  --------------  --------------  --------  --------  ---------------  ----------  ----------------------\nMyVol           vsanDatastore  photon.vsan.1  Mon Jul  4 17:44:28 2016  detached        [VSAN default]  100.00MB  40.00MB   ext4             read-write  independent_persistent\nunt             vsanDatastore  photon.vsan.1  Mon Jul  4 19:55:26 2016  detached        [VSAN default]  100.00MB  40.00MB   ext4             read-write  independent_persistent\niland           vsanDatastore  photon.vsan.1  Mon Jul  4 20:11:42 2016  detached        [VSAN default]  100.00MB  40.00MB   ext4             read-write  independent_persistent\nfoo             vsanDatastore  photon.vsan.1  Mon Jul 11 03:17:09 2016  detached        [VSAN default]  20.00GB   228.00MB  ext4             read-write  independent_persistent\nMyVolume        vsanDatastore  photon.vsan.1  Mon Jul 11 10:25:45 2016  detached        [VSAN default]  10.00GB   192.00MB  ext4             read-write  independent_persistent\nstorage-meetup  vsanDatastore  photon.vsan.1  Mon Jul 11 10:50:20 2016  detached        [VSAN default]  10.00GB   348.00MB  ext4             read-write  independent_persistent\nstorage         vsanDatastore  photon.vsan.1  Tue Jul 12 12:53:07 2016  detached        [VSAN default]  10.00GB   192.00MB  ext4             read-write  independent_persistent\nstorage2        vsanDatastore  photon.vsan.1  Tue Jul 12 13:00:11 2016  detached        [VSAN default]  10.00GB   192.00MB  ext4             read-write  independent_persistent\n\n\n\n\nNote that the \nPolicy\n column shows the named VSAN storage policy created with the same tool\n(vmdkops_admin.py).  Since these example virtual disks live on a VMFS datastore they do not have a storage\npolicy and show up as `N/A\u2019.\n\n\nList selected columns\n\u00b6\n\n\nShow only the selected columns.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py ls -c volume,datastore,attached-to\nVolume     Datastore   Attached To VM\n---------  ----------  --------------\nlarge-vol  datastore1  detached\nvol        datastore1  detached\n\n\n\n\nNote that the that the choices are given in a comma separated list with no spaces, and are shown in\nthe help given above with \nvmdkops_admin ls -h\n.\n\n\nSet\n\u00b6\n\n\nModify attribute settings on a given volume. The volume is identified by its name and datastore,\nfor example if the volume name is \ncontainer-vol\n then the volume is specified as \u201ccontainer-vol@datastore-name\u201d.\nThe attributes to set/modify are specified as a comma separated list as \u201c\n=\n, \n=\n....\u201d. For example,\na command line would look like this.\n\n\n$ vmdkops-admin set --volume=<volume@datastore> --options=\"<attr1>=<value>, <attr2>=<value>, ...\"\n\n\n\n\nThe volume attributes are set and take effect only the next time the volume attached to a VM. The changes do not impact any VM\nthats currently using the volume. For the present, only the \u201caccess\u201d attribute is supported to be modified via this command, and\ncan be set to either of the allowed values \u201cread-only\u201d or \u201cread-write\u201d.\n\n\nSet command allows the admin to enforce a volume to be read-only.\nThis removes the need to depend on \nDocker\u2019s run command options for volume access\n (\ndocker run -v /vol:/vol:ro\n).\n\n\nA sample use case:\n\n\n\n\nCreate a volume, attach to a container (default is read-write).\n\n\nMaster the volume with libraries commonly used by the target application (or a cluster of apps that form a docker app bundle).\n\n\nUse admin CLI to flip the access attribute to read-only.\n\n\nMake those libraries available to the containers in the app bundle and they can all share the same libraries.\n\n\n\n\nThe container images themselves can be smaller as they share the libs and possibly binaries from read-only volumes.\n\n\nPolicy\n\u00b6\n\n\nCreate, configure and show the VSAN policy names and their corresponding VSAN policy strings. Also show whether or not they are in use.\n\n\nHelp\n\u00b6\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy -h\nusage: vmdkops_admin.py policy [-h] {rm,create,ls,update} ...\n\npositional arguments:\n  {rm,create,ls,update}\n    rm                  Remove a storage policy\n    create              Create a storage policy\n    ls                  List storage policies and volumes using those policies\n    update              Update the definition of a storage policy and all VSAN\n                        objects using that policy\n\noptional arguments:\n  -h, --help            show this help message and exit\n\n\n\n\nCreate\n\u00b6\n\n\nCreate a VSAN storage policy.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy create --name some-policy --content '((\"proportionalCapacity\" i0)(\"hostFailuresToTolerate\" i0)'\nSuccessfully created policy: some-policy\n\n\n\n\nNote that the VSAN storage policy string given with \n--content\n is a standard VSAN storage policy\nstring.  Please refer to the \nVSAN documentation\n\nfor storage policy options.\n\n\nList\n\u00b6\n\n\nList all VSAN storage policies.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy ls\nPolicy Name  Policy Content                                             Active\n-----------  ---------------------------------------------------------  ------\nsome-policy  ((\"proportionalCapacity\" i0)(\"hostFailuresToTolerate\" i0)  Unused\n\n\n\n\nWhen creating a virtual disk using \ndocker volume create\n, the policy name should be given with the \n-o\n\noption such as \ndocker volume create --driver=vsphere --name=some-vol -o vsan-policy-name=some-policy\n.\nThe number of virtual disks using the policy will then show up in the \nActive\n column.\n\n\nUpdate\n\u00b6\n\n\nUpdate a VSAN storage policy.\n\n\nThis command will update a VSAN storage policy for all virtual disks currently using this policy. If\nthe command fails, the number of virtual disks that were successfully updated and the number that\nfailed to update will be shown. The names of the virtual disks that failed to update will be logged\nso that manual action can be taken.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy update --name some-policy --content '((\"proportionalCapacity\" i1)'\nThis operation may take a while. Please be patient.\nSuccessfully updated policy: some-policy\n\n\n\n\nRemove\n\u00b6\n\n\nRemove a VSAN storage policy. Note that a storage policy cannot be removed if it is currently in use\nby one or more virtual disks.\n\n\nThe ability to list which virtual disks are using a specific storage policy, change storage policies\nfor a virtual disk, and reset virtual disks to the default storage policy is a necessary\nenhancement tracked \nhere\n.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy rm some-policy\nSuccessfully removed policy: some-policy\n\n\n\n\nStatus\n\u00b6\n\n\nShow config and run-time information about the service.\n\n\n[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py status\n Version: 1.0.0-0.0.1\n Status: Running\n Pid: 161104\n Port: 1019\n LogConfigFile: /etc/vmware/vmdkops/log_config.json\n LogFile: /var/log/vmware/vmdk_ops.log\n LogLevel: INFO",
            "title": "Admin CLI"
        },
        {
            "location": "/user-guide/admin-cli/#introduction",
            "text": "With the vSphere Docker Volume Service, each ESXi host manages multiple VMs, with\neach of them acting as a Docker host. The Docker engine on these hosts communicates with the Docker\nvolume service to create and delete virtual disks (VMDKs), as well as mounts them as Docker\nvolumes. These virtual disks may live on any datastore accessible to the ESXi host and are managed\nby the Docker user via the Docker CLI. However, the Docker CLI is limited in what visibility it can\nprovide to the user. Furthermore, it is desirable that an administrator be able to get a global view\nof all virtual disks created and in use on the host.  For these reasons, an admin CLI has been\ncreated that runs on the ESXi host and that provides access to information not visible from the\nDocker CLI.  The admin cli also enables ESX admins to implement tenancy.  The remainder of this document will describe each admin CLI command and provide examples\nof their usage.",
            "title": "Introduction"
        },
        {
            "location": "/user-guide/admin-cli/#tenant",
            "text": "",
            "title": "Tenant"
        },
        {
            "location": "/user-guide/admin-cli/#help",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant -h\nusage: vmdkops_admin.py tenant [-h] {create,vm,update,access,ls,rm} ...\n\npositional arguments:\n  {create,vm,update,access,ls,rm}\n    create              Create a new tenant\n    vm                  Add, removes and lists VMs in a tenant\n    update              Update an existing tenant\n    access              Add or remove Datastore access and quotas for a tenant\n    ls                  List tenants and the VMs they are applied to\n    rm                  Delete a tenant\n\noptional arguments:\n  -h, --help            show this help message and exit",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#create",
            "text": "A tenant named \u201c_DEFAULT\u201d will be created automatically post install.  Creates a new named tenant and optionally assigns VMs. Valid tenant name is only allowed to be \u201c[a-zA-Z0-9_][a-zA-Z0-9_.-]*\u201d  Sample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create --name=tenant1\ntenant create succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\n3277ad45-e916-4e06-8fd5-381e6090d15b  tenant1  The tenant to VM association can be done at create time.  Sample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create --name=tenant1 --vm-list=photon4\ntenant create succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\nc932f2bf-6554-442a-86f6-ec721dd3dced  tenant1                                                photon4",
            "title": "Create"
        },
        {
            "location": "/user-guide/admin-cli/#help_1",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create -h\nusage: vmdkops_admin.py tenant create [-h] --name NAME\n                                      [--description DESCRIPTION]\n                                      [--vm-list vm1, vm2, ...]\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --name NAME           The name of the tenant\n  --description DESCRIPTION\n                        The description of the tenant\n  --vm-list vm1, vm2, ...\n                        A list of VM names to place in this Tenant",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#list",
            "text": "List existing tenants, the datastores tenants have access to and the VMs assigned.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\nc932f2bf-6554-442a-86f6-ec721dd3dced  tenant1                                                photon4",
            "title": "List"
        },
        {
            "location": "/user-guide/admin-cli/#help_2",
            "text": "[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls -h\nusage: vmdkops_admin.py tenant ls [-h]\n\noptional arguments:\n  -h, --help  show this help message and exit",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#update",
            "text": "Update existing tenant. This command allows to update \u201cDescription\u201d and \u201cDefault_datastore\u201d fields, or rename an existing tenant.\nSample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\na11dda75-0632-4fe0-9caa-d2308bf73df7  _DEFAULT  This is a default tenant\n946570fe-9842-491f-a172-426284b36eeb  tenant1                             datastore2         photon4\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant update --name=tenant1 --description=\"New description of tenant1\" --new-name=new-tenant1 --default-datastore=datastore1\ntenant modify succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name         Description                 Default_datastore  VM_list\n------------------------------------  -----------  --------------------------  -----------------  -------\na11dda75-0632-4fe0-9caa-d2308bf73df7  _DEFAULT     This is a default tenant\n946570fe-9842-491f-a172-426284b36eeb  new-tenant1  New description of tenant1  datastore1         photon4",
            "title": "Update"
        },
        {
            "location": "/user-guide/admin-cli/#help_3",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant update -h\nusage: vmdkops_admin.py tenant update [-h] --name NAME\n                                      [--default-datastore DEFAULT_DATASTORE]\n                                      [--description DESCRIPTION]\n                                      [--new-name NEW_NAME]\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --name NAME           The name of the tenant\n  --default-datastore DEFAULT_DATASTORE\n                        The name of the datastore to be used by default for\n                        volumes placement\n  --description DESCRIPTION\n                        The new description of the tenant\n  --new-name NEW_NAME   The new name of the tenant",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#remove",
            "text": "Remove a tenant, optionally all volumes for a tenant can be removed as well.  Sample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant rm --name=tenant1 --remove-volumes\nAll Volumes will be removed\ntenant rm succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant",
            "title": "Remove"
        },
        {
            "location": "/user-guide/admin-cli/#help_4",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant rm -h\nusage: vmdkops_admin.py tenant rm [-h] --name NAME [--remove-volumes]\n\noptional arguments:\n  -h, --help        show this help message and exit\n  --name NAME       The name of the tenant\n  --remove-volumes  BE CAREFUL: Removes this tenant volumes when removing a\n                    tenant",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#virtual-machine",
            "text": "",
            "title": "Virtual Machine"
        },
        {
            "location": "/user-guide/admin-cli/#add",
            "text": "Add a VM to a tenant. A VM can only access the datastores for the tenant it is assigned to.\nVMs can be assigned to only one tenant at a time.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm add --name=tenant1 --vm-list=photon5\ntenant vm add succeeded",
            "title": "Add"
        },
        {
            "location": "/user-guide/admin-cli/#list_1",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm ls --name=tenant1\nUuid                                  Name\n------------------------------------  -------\n564df562-3d58-c99a-e76e-e8792b77ca2d  photon4\n564d4728-f1c7-2029-d01e-51f5e6536cd9  photon5",
            "title": "List"
        },
        {
            "location": "/user-guide/admin-cli/#remove_1",
            "text": "Remove a VM from a tenant\u2019s list of VMs. VM will no longer be able to access the volumes created for the tenant.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm rm --name=tenant1 --vm-list=photon5\ntenant vm rm succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm ls --name=tenant1\nUuid                                  Name\n------------------------------------  -------\n564df562-3d58-c99a-e76e-e8792b77ca2d  photon4",
            "title": "Remove"
        },
        {
            "location": "/user-guide/admin-cli/#help_5",
            "text": "[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant vm -h\nusage: vmdkops_admin.py tenant vm [-h] {rm,add,ls} ...\n\npositional arguments:\n  {rm,add,ls}\n    rm         Remove VM(s) from a tenant\n    add        Add a VM(s) to a tenant\n    ls         list VMs in a tenant\n\noptional arguments:\n  -h, --help   show this help message and exit",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#access",
            "text": "Change the access control for a tenant.\nThis includes ability to grant privileges & set resource consumption limits for a datastore.",
            "title": "Access"
        },
        {
            "location": "/user-guide/admin-cli/#help_6",
            "text": "[root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access -h\nusage: vmdkops_admin.py tenant access [-h] {rm,add,set,ls} ...\n\npositional arguments:\n  {rm,add,set,ls}\n    rm             Remove all access to a datastore for a tenant\n    add            Add a datastore access for a tenant\n    set            Modify datastore access for a tenant\n    ls             List all access info for a tenant\n\noptional arguments:\n  -h, --help       show this help message and exit",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#add_1",
            "text": "Grants datastore access to a tenant.  The datastore will be automatically set as \u201cdefault_datastore\u201d for the tenant\nwhen you grant first datastore access for a tenant.  Sample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=tenant1 --datastore=datastore1  --volume-maxsize=500MB --volume-totalsize=1GB\ntenant access add succeeded\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\nc932f2bf-6554-442a-86f6-ec721dd3dced  tenant1                             datastore1         photon4  The datastore will be set as \u201cdefault_datastore\u201d for the tenant when you grant datastore access for a tenant with \u201c\u2013default-datastore\u201d flag.  Sample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=tenant1 --datastore=datastore2  --allow-create --default-datastore --volume-maxsize=500MB --volume-totalsize=1GB\ntenant access add succeeded\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          500.00MB         1.00GB\ndatastore2  True          500.00MB         1.00GB\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list\n------------------------------------  --------  ------------------------  -----------------  -------\n527e94ec-43e9-4d78-81fe-d99ab06a54b3  _DEFAULT  This is a default tenant\n371a68e3-8c86-467a-a4dc-753f3066ca8a  tenant1                             datastore2         photon4  By default no \u201callow_create\u201d right is given  [root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name tenant1 --datastore datastore1\ntenant access add succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  False         500.00MB         1.00GB  \u201callow_create\u201d right is given when you run the command with \u201c\u2013allow-create\u201d flag.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=tenant1 --datastore=datastore1 --allow-create --volume-maxsize=500MB --volume-totalsize=1GB\ntenant access add succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          500.00MB         1.00GB",
            "title": "Add"
        },
        {
            "location": "/user-guide/admin-cli/#help_7",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add -h\nusage: vmdkops_admin.py tenant access add [-h]\n                                          [--volume-totalsize Num{MB,GB,TB} - e.g. 2TB]\n                                          [--volume-maxsize Num{MB,GB,TB} - e.g. 2TB]\n                                          [--allow-create] --name NAME\n                                          [--default-datastore] --datastore\n                                          DATASTORE\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --volume-totalsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum total size of all volume that can be created\n                        on the datastore for this tenant\n  --volume-maxsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum size of the volume that can be created\n  --allow-create        Allow create and delete on the datastore if set to True\n  --name NAME           The name of the tenant\n  --default-datastore   Mark datastore as a default datastore for this tenant\n  --datastore DATASTORE\n                        Datastore which access is controlled",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#list_2",
            "text": "List the current access control granted to a tenant.  When displaying the result keep in mind:   For capacity Unset indicates no limits   [root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          Unset            Unset",
            "title": "List"
        },
        {
            "location": "/user-guide/admin-cli/#help_8",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls -h\nusage: vmdkops_admin.py tenant access ls [-h] --name NAME\n\noptional arguments:\n  -h, --help   show this help message and exit\n  --name NAME  The name of the tenant",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#remove_2",
            "text": "Remove access to a datastore for a tenant.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access rm --name=tenant1 --datastore=datastore1\ntenant access rm succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore  Allow_create  Max_volume_size  Total_size\n---------  ------------  ---------------  ----------",
            "title": "Remove"
        },
        {
            "location": "/user-guide/admin-cli/#help_9",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access rm -h\nusage: vmdkops_admin.py tenant access rm [-h] --name NAME --datastore\n                                         DATASTORE\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --name NAME           The name of the tenant\n  --datastore DATASTORE\n                        Datstore which access is controlled",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#set",
            "text": "Set command allows to change the existing access control in place for a tenant.  Sample:  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  False         500.00MB         1.00GB\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access set --name=tenant1 --datastore=datastore1 --allow-create --volume-maxsize=1000MB --volume-totalsize=2GB\ntenant access set succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access ls --name=tenant1\nDatastore   Allow_create  Max_volume_size  Total_size\n----------  ------------  ---------------  ----------\ndatastore1  True          1000.00MB        2.00GB",
            "title": "Set"
        },
        {
            "location": "/user-guide/admin-cli/#help_10",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access set -h\nusage: vmdkops_admin.py tenant access set [-h]\n                                          [--volume-totalsize Num{MB,GB,TB} - e.g. 2TB]\n                                          --name NAME\n                                          [--volume-maxsize Num{MB,GB,TB} - e.g. 2TB]\n                                          [--allow-create Value{True|False} e.g. True]\n                                          --datastore DATASTORE\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --volume-totalsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum total size of all volume that can be created\n                        on the datastore for this tenant\n  --name NAME           Tenant name\n  --volume-maxsize Num{MB,GB,TB} - e.g. 2TB\n                        Maximum size of the volume that can be created\n  --allow-create Value{True|False} - e.g. True\n                        Allow create and delete on datastore if set to True;\n                        disallow create and delete on datastore if set to\n                        False\n  --datastore DATASTORE\n                        Datastore name",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#volume",
            "text": "",
            "title": "Volume"
        },
        {
            "location": "/user-guide/admin-cli/#list_3",
            "text": "",
            "title": "List"
        },
        {
            "location": "/user-guide/admin-cli/#help_11",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py ls -h\nusage: vmdkops_admin.py ls [-h] [-c Col1,Col2,...]\n\noptional arguments:\n  -h, --help        show this help message and exit\n  -c Col1,Col2,...  Display selected columns: Choices = ['volume',\n                    'datastore', 'created-by', 'created', 'attached-to',\n                    'policy', 'capacity', 'used']",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#list-all",
            "text": "List all properties for all Docker volumes that exist on datastores accessible to the host.  Volume          Datastore      Created By VM  Created                   Attached To VM  Policy          Capacity  Used      Filesystem Type  Access      Attach As\n--------------  -------------  -------------  ------------------------  --------------  --------------  --------  --------  ---------------  ----------  ----------------------\nMyVol           vsanDatastore  photon.vsan.1  Mon Jul  4 17:44:28 2016  detached        [VSAN default]  100.00MB  40.00MB   ext4             read-write  independent_persistent\nunt             vsanDatastore  photon.vsan.1  Mon Jul  4 19:55:26 2016  detached        [VSAN default]  100.00MB  40.00MB   ext4             read-write  independent_persistent\niland           vsanDatastore  photon.vsan.1  Mon Jul  4 20:11:42 2016  detached        [VSAN default]  100.00MB  40.00MB   ext4             read-write  independent_persistent\nfoo             vsanDatastore  photon.vsan.1  Mon Jul 11 03:17:09 2016  detached        [VSAN default]  20.00GB   228.00MB  ext4             read-write  independent_persistent\nMyVolume        vsanDatastore  photon.vsan.1  Mon Jul 11 10:25:45 2016  detached        [VSAN default]  10.00GB   192.00MB  ext4             read-write  independent_persistent\nstorage-meetup  vsanDatastore  photon.vsan.1  Mon Jul 11 10:50:20 2016  detached        [VSAN default]  10.00GB   348.00MB  ext4             read-write  independent_persistent\nstorage         vsanDatastore  photon.vsan.1  Tue Jul 12 12:53:07 2016  detached        [VSAN default]  10.00GB   192.00MB  ext4             read-write  independent_persistent\nstorage2        vsanDatastore  photon.vsan.1  Tue Jul 12 13:00:11 2016  detached        [VSAN default]  10.00GB   192.00MB  ext4             read-write  independent_persistent  Note that the  Policy  column shows the named VSAN storage policy created with the same tool\n(vmdkops_admin.py).  Since these example virtual disks live on a VMFS datastore they do not have a storage\npolicy and show up as `N/A\u2019.",
            "title": "List All"
        },
        {
            "location": "/user-guide/admin-cli/#list-selected-columns",
            "text": "Show only the selected columns.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py ls -c volume,datastore,attached-to\nVolume     Datastore   Attached To VM\n---------  ----------  --------------\nlarge-vol  datastore1  detached\nvol        datastore1  detached  Note that the that the choices are given in a comma separated list with no spaces, and are shown in\nthe help given above with  vmdkops_admin ls -h .",
            "title": "List selected columns"
        },
        {
            "location": "/user-guide/admin-cli/#set_1",
            "text": "Modify attribute settings on a given volume. The volume is identified by its name and datastore,\nfor example if the volume name is  container-vol  then the volume is specified as \u201ccontainer-vol@datastore-name\u201d.\nThe attributes to set/modify are specified as a comma separated list as \u201c = ,  = ....\u201d. For example,\na command line would look like this.  $ vmdkops-admin set --volume=<volume@datastore> --options=\"<attr1>=<value>, <attr2>=<value>, ...\"  The volume attributes are set and take effect only the next time the volume attached to a VM. The changes do not impact any VM\nthats currently using the volume. For the present, only the \u201caccess\u201d attribute is supported to be modified via this command, and\ncan be set to either of the allowed values \u201cread-only\u201d or \u201cread-write\u201d.  Set command allows the admin to enforce a volume to be read-only.\nThis removes the need to depend on  Docker\u2019s run command options for volume access  ( docker run -v /vol:/vol:ro ).  A sample use case:   Create a volume, attach to a container (default is read-write).  Master the volume with libraries commonly used by the target application (or a cluster of apps that form a docker app bundle).  Use admin CLI to flip the access attribute to read-only.  Make those libraries available to the containers in the app bundle and they can all share the same libraries.   The container images themselves can be smaller as they share the libs and possibly binaries from read-only volumes.",
            "title": "Set"
        },
        {
            "location": "/user-guide/admin-cli/#policy",
            "text": "Create, configure and show the VSAN policy names and their corresponding VSAN policy strings. Also show whether or not they are in use.",
            "title": "Policy"
        },
        {
            "location": "/user-guide/admin-cli/#help_12",
            "text": "[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy -h\nusage: vmdkops_admin.py policy [-h] {rm,create,ls,update} ...\n\npositional arguments:\n  {rm,create,ls,update}\n    rm                  Remove a storage policy\n    create              Create a storage policy\n    ls                  List storage policies and volumes using those policies\n    update              Update the definition of a storage policy and all VSAN\n                        objects using that policy\n\noptional arguments:\n  -h, --help            show this help message and exit",
            "title": "Help"
        },
        {
            "location": "/user-guide/admin-cli/#create_1",
            "text": "Create a VSAN storage policy.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy create --name some-policy --content '((\"proportionalCapacity\" i0)(\"hostFailuresToTolerate\" i0)'\nSuccessfully created policy: some-policy  Note that the VSAN storage policy string given with  --content  is a standard VSAN storage policy\nstring.  Please refer to the  VSAN documentation \nfor storage policy options.",
            "title": "Create"
        },
        {
            "location": "/user-guide/admin-cli/#list_4",
            "text": "List all VSAN storage policies.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy ls\nPolicy Name  Policy Content                                             Active\n-----------  ---------------------------------------------------------  ------\nsome-policy  ((\"proportionalCapacity\" i0)(\"hostFailuresToTolerate\" i0)  Unused  When creating a virtual disk using  docker volume create , the policy name should be given with the  -o \noption such as  docker volume create --driver=vsphere --name=some-vol -o vsan-policy-name=some-policy .\nThe number of virtual disks using the policy will then show up in the  Active  column.",
            "title": "List"
        },
        {
            "location": "/user-guide/admin-cli/#update_1",
            "text": "Update a VSAN storage policy.  This command will update a VSAN storage policy for all virtual disks currently using this policy. If\nthe command fails, the number of virtual disks that were successfully updated and the number that\nfailed to update will be shown. The names of the virtual disks that failed to update will be logged\nso that manual action can be taken.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy update --name some-policy --content '((\"proportionalCapacity\" i1)'\nThis operation may take a while. Please be patient.\nSuccessfully updated policy: some-policy",
            "title": "Update"
        },
        {
            "location": "/user-guide/admin-cli/#remove_3",
            "text": "Remove a VSAN storage policy. Note that a storage policy cannot be removed if it is currently in use\nby one or more virtual disks.  The ability to list which virtual disks are using a specific storage policy, change storage policies\nfor a virtual disk, and reset virtual disks to the default storage policy is a necessary\nenhancement tracked  here .  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py policy rm some-policy\nSuccessfully removed policy: some-policy",
            "title": "Remove"
        },
        {
            "location": "/user-guide/admin-cli/#status",
            "text": "Show config and run-time information about the service.  [root@localhost:~]  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py status\n Version: 1.0.0-0.0.1\n Status: Running\n Pid: 161104\n Port: 1019\n LogConfigFile: /etc/vmware/vmdkops/log_config.json\n LogFile: /var/log/vmware/vmdk_ops.log\n LogLevel: INFO",
            "title": "Status"
        },
        {
            "location": "/user-guide/faq/",
            "text": "General\n\n\nWhere do I get the binaries ? What about the source ?\n\n\nHow to install and use the driver?\n\n\nHow do I run the setup on my laptop?\n\n\n\n\n\n\nTroubleshooting\n\n\nDocker Service to ESX Backend Communication.\n\n\nWhat is VMCI and vSock and why is it needed?\n\n\nI see \u201cconnection reset by peer (errno=104)\u201d in the service\u2019s logs, what is the cause?\n\n\nI see \u201caddress family not supported by protocol (errno=97)\u201d in the service\u2019s logs, what is the cause?\n\n\n\n\n\n\nUpgrade to version 0.10 (Dec 2016) release\n\n\nHow to know if auth-db upgrade is needed post install?\n\n\nHow to handle the upgrade manually?\n\n\nCase 1: No tenant configured before\n\n\nCase2:  Has tenant configured before\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGeneral\n\u00b6\n\n\nWhere do I get the binaries ? What about the source ?\n\u00b6\n\n\nPlease look at \nGitHub Releases\n for binaries. Github releases allow downloading of source for a release in addition to git clone.\n\n\nHow to install and use the driver?\n\u00b6\n\n\nPlease see README.md in the for the release by clicking on the tag for the release. Example: \nREADME\n\n\nHow do I run the setup on my laptop?\n\u00b6\n\n\nFollow the \nguide on the wiki\n\n\nTroubleshooting\n\u00b6\n\n\nDocker Service to ESX Backend Communication.\n\u00b6\n\n\nWhat is VMCI and vSock and why is it needed?\n\u00b6\n\n\nvSphere Docker Volume Service uses VMCI and vSock to communicate with the hypervisor to implement the volume operations. It comes installed on Photon OS and on Ubuntu follow \nVMware tools installation\n or use open vmtools \n\napt-get install open-vm-tools\n. \nAdditional reading for differences between VMware tools and open vm tools: \n\n\n\n\nOpen-VM-Tools (OVT): The Future Of VMware Tools For Linux\n \n\n\nVMware Tools vs Open VM Tools\n\n\n\n\nI see \u201cconnection reset by peer (errno=104)\u201d in the \nservice\u2019s logs\n, what is the cause?\n\u00b6\n\n\n104 is a standard linux error (\n#define ECONNRESET      104     /* Connection reset by peer */\n)\n\n\nIt occurs if the Docker volume service cannot communicate to the ESX back end. This can happen if:\n   * VMCI and/or vSock kernel modules are not loaded or the kernel does not support VMCI and vSock. Please read \u201cWhat is VMCI and vSock and why is it needed?\u201d above.\n   * ESX service is not running. \n/etc/init.d/vmdk-opsd status\n. Check \nESX Logs\n\n   * ESX service and the docker volume service are not communicating on the same port. \nps -c | grep vmdk #On ESX\n and \nps aux| grep docker-volume-vsphere # On VM\n check the port param passed in and make sure they are the same\n\n\nI see \u201caddress family not supported by protocol (errno=97)\u201d in the \nservice\u2019s logs\n, what is the cause?\n\u00b6\n\n\n97 is a standard linux error (\n#define EAFNOSUPPORT    97      /* Address family not supported by protocol */\n)\n\n\nIt occurs if the linux kernel does not know about the AF family used for VMCI communication. Please read \n\u201cWhat is VMCI and vSock and why is it needed?\u201d\n above.\n\n\nUpgrade to version 0.10 (Dec 2016) release\n\u00b6\n\n\nTenancy changes in release 0.10 need a manual upgrade process enumerated below.\n\nSave the desired tenancy configuration before upgrade\n\n\nHow to know if auth-db upgrade is needed post install?\n\u00b6\n\n\nAfter installing the new build, type command \u201ctenant ls\u201d\nCheck for failure to connect to auth DB.\n\n\n/usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nFailed to connect auth DB(DB connection error /etc/vmware/vmdkops/auth-db)\n\n\n\n\nThe corresponding errors in the vmdk_ops.log file.\n\n\n[root@localhost:~] cat /var/log/vmware/vmdk_ops.log\n\n08/29/16 08:20:23 297059 [MainThread] [ERROR  ] version 0.0 in auth-db does not match latest DB version 1.0\n08/29/16 08:20:23 297059 [MainThread] [ERROR  ] DB upgrade is not supported. Please remove the DB file at /etc/vmware/vmdkops/auth-db. All existing configuration will be removed and need to be recreated after removing the DB file.\n\n\n\n\nHow to handle the upgrade manually?\n\u00b6\n\n\nCase 1: No tenant configured before\n\u00b6\n\n\nIf no tenant has been configured, user just needs to delete the auth-db file\n\n\nStep 1: Remove  auth-db file at /etc/vmware/vmdkops/auth-db\n\n\n[root@localhost:/etc/vmware/vmdkops]rm /etc/vmware/vmdkops/auth-db\n\n\n\n\nStep 2: Verify \u201ctenant ls\u201d command\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list \n------------------------------------  --------  ------------------------  -----------------  ------- \n775888a6-6e98-4f41-9ff2-2ab12afd98de  _DEFAULT  This is a default tenant\n\n\n\n\nAfter this point, the manually upgrade is done, and tenancy operations will succeed.\n\n\nCase2:  Has tenant configured before\n\u00b6\n\n\nStep 1: Backup data manually.\n\n\nExample below has a tenant \ntenant1\n with VM \nphoton4\n assigned to this tenant and one volumes: vol1@datastore1 created.\n\n\nroot@photon-JQQBWNwG6 [ ~ ]# docker volume ls\nDRIVER              VOLUME NAME\nvmdk                vol1@datastore1\n\n\n\n\nUser needs to manually backup data stored in vol1@datastore1.\n\n\nStep 2: Move the auth-db file at /etc/vmware/vmdkops/auth-db\n\n\n[root@localhost:/etc/vmware/vmdkops]mv /etc/vmware/vmdkops/auth-db /etc/vmware/vmdkops/auth-db.backup.v10.upgrade\n\n\n\n\nStep 3: Verify \u201ctenant ls\u201d command, now only  \n_DEFAULT\n should be listed.\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list \n------------------------------------  --------  ------------------------  -----------------  ------- \n775888a6-6e98-4f41-9ff2-2ab12afd98de  _DEFAULT  This is a default tenant                             \n\n\n\n\nStep 4: Recreate the tenant configuration with new name \u201cnew-tenant1\u201d (associate the same VM photon4 to this new-tenant1), see the following example:\n\n\nNote: Please DO NOT create the tenant with the old name \u201ctenant1\u201d!!!\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create --name=new-tenant1  --vm-list=photon4\ntenant create succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=new-tenant1 --datastore=datastore1  --volume-maxsize=500MB --volume-totalsize=1GB --allow-create\ntenant access add succeeded\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name         Description               Default_datastore  VM_list \n------------------------------------  -----------  ------------------------  -----------------  ------- \n775888a6-6e98-4f41-9ff2-2ab12afd98de  _DEFAULT     This is a default tenant                             \nd5964623-f4bd-4fa6-af4f-b7fa7f51ba5e  new-tenant1                            datastore1         photon4 \n\n\n\n\nStep 4: Run \u201cdocker volume ls\u201d from VM \u201cphoton4\u201d,  volume which belongs to \u201ctenant1\u201d which was created before will not be visible\n\n\nroot@photon-JQQBWNwG6 [ ~ ]# docker volume ls\nDRIVER              VOLUME NAME\n\n\n\n\nStep 5: Run \u201cdocker volume create\u201d  to create a new volume \u201cnew-tenant1-vol1\u201d and run \u201cdocker volume ls\u201d,   should only able to see this volume which was just created\n\n\nroot@photon-JQQBWNwG6 [ ~ ]# docker volume create --driver=vsphere --name=new-tenant1-vol1 -o size=100MB\nnew-tenant1-vol1\nroot@photon-JQQBWNwG6 [ ~ ]# docker volume ls\nDRIVER              VOLUME NAME\nvmdk                new-tenant1-vol1@datastore1\n\n\n\n\nVolume \u201cvol1\u201d which was created before still exists, and can be seen from the following AdminCLI command\n\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py ls\nVolume            Datastore   Created By VM  Created                   Attached To VM  Policy  Capacity  Used      Disk Format  Filesystem Type  Access      Attach As              \n----------------  ----------  -------------  ------------------------  --------------  ------  --------  --------  -----------  ---------------  ----------  ---------------------- \nnew-tenant1-vol1  datastore1  photon4        Mon Aug 29 09:17:01 2016  detached        N/A     100.00MB  13.00MB   thin         ext4             read-write  independent_persistent \nvol1              datastore1  photon4        Mon Aug 29 09:09:18 2016  detached        N/A     100.00MB  100.00MB  thin         ext4             read-write  independent_persistent \n\n\n\n\nStep6: Manually copy the data from backup to the new volume \u201cnew-tenant1-vol1@datastore1\u201d. \nThe path which stores this new volume is \u201c/vmfs/volumes/datastore1/dockvols/new-tenant1\u201d.",
            "title": "FAQ"
        },
        {
            "location": "/user-guide/faq/#general",
            "text": "",
            "title": "General"
        },
        {
            "location": "/user-guide/faq/#where-do-i-get-the-binaries-what-about-the-source",
            "text": "Please look at  GitHub Releases  for binaries. Github releases allow downloading of source for a release in addition to git clone.",
            "title": "Where do I get the binaries ? What about the source ?"
        },
        {
            "location": "/user-guide/faq/#how-to-install-and-use-the-driver",
            "text": "Please see README.md in the for the release by clicking on the tag for the release. Example:  README",
            "title": "How to install and use the driver?"
        },
        {
            "location": "/user-guide/faq/#how-do-i-run-the-setup-on-my-laptop",
            "text": "Follow the  guide on the wiki",
            "title": "How do I run the setup on my laptop?"
        },
        {
            "location": "/user-guide/faq/#troubleshooting",
            "text": "",
            "title": "Troubleshooting"
        },
        {
            "location": "/user-guide/faq/#docker-service-to-esx-backend-communication",
            "text": "",
            "title": "Docker Service to ESX Backend Communication."
        },
        {
            "location": "/user-guide/faq/#what-is-vmci-and-vsock-and-why-is-it-needed",
            "text": "vSphere Docker Volume Service uses VMCI and vSock to communicate with the hypervisor to implement the volume operations. It comes installed on Photon OS and on Ubuntu follow  VMware tools installation  or use open vmtools  apt-get install open-vm-tools . \nAdditional reading for differences between VMware tools and open vm tools:    Open-VM-Tools (OVT): The Future Of VMware Tools For Linux    VMware Tools vs Open VM Tools",
            "title": "What is VMCI and vSock and why is it needed?"
        },
        {
            "location": "/user-guide/faq/#i-see-connection-reset-by-peer-errno104-in-the-services-logs-what-is-the-cause",
            "text": "104 is a standard linux error ( #define ECONNRESET      104     /* Connection reset by peer */ )  It occurs if the Docker volume service cannot communicate to the ESX back end. This can happen if:\n   * VMCI and/or vSock kernel modules are not loaded or the kernel does not support VMCI and vSock. Please read \u201cWhat is VMCI and vSock and why is it needed?\u201d above.\n   * ESX service is not running.  /etc/init.d/vmdk-opsd status . Check  ESX Logs \n   * ESX service and the docker volume service are not communicating on the same port.  ps -c | grep vmdk #On ESX  and  ps aux| grep docker-volume-vsphere # On VM  check the port param passed in and make sure they are the same",
            "title": "I see \"connection reset by peer (errno=104)\" in the service's logs, what is the cause?"
        },
        {
            "location": "/user-guide/faq/#i-see-address-family-not-supported-by-protocol-errno97-in-the-services-logs-what-is-the-cause",
            "text": "97 is a standard linux error ( #define EAFNOSUPPORT    97      /* Address family not supported by protocol */ )  It occurs if the linux kernel does not know about the AF family used for VMCI communication. Please read  \u201cWhat is VMCI and vSock and why is it needed?\u201d  above.",
            "title": "I see \"address family not supported by protocol (errno=97)\" in the service's logs, what is the cause?"
        },
        {
            "location": "/user-guide/faq/#upgrade-to-version-010-dec-2016-release",
            "text": "Tenancy changes in release 0.10 need a manual upgrade process enumerated below. Save the desired tenancy configuration before upgrade",
            "title": "Upgrade to version 0.10 (Dec 2016) release"
        },
        {
            "location": "/user-guide/faq/#how-to-know-if-auth-db-upgrade-is-needed-post-install",
            "text": "After installing the new build, type command \u201ctenant ls\u201d\nCheck for failure to connect to auth DB.  /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nFailed to connect auth DB(DB connection error /etc/vmware/vmdkops/auth-db)  The corresponding errors in the vmdk_ops.log file.  [root@localhost:~] cat /var/log/vmware/vmdk_ops.log\n\n08/29/16 08:20:23 297059 [MainThread] [ERROR  ] version 0.0 in auth-db does not match latest DB version 1.0\n08/29/16 08:20:23 297059 [MainThread] [ERROR  ] DB upgrade is not supported. Please remove the DB file at /etc/vmware/vmdkops/auth-db. All existing configuration will be removed and need to be recreated after removing the DB file.",
            "title": "How to know if auth-db upgrade is needed post install?"
        },
        {
            "location": "/user-guide/faq/#how-to-handle-the-upgrade-manually",
            "text": "",
            "title": "How to handle the upgrade manually?"
        },
        {
            "location": "/user-guide/faq/#case-1-no-tenant-configured-before",
            "text": "If no tenant has been configured, user just needs to delete the auth-db file  Step 1: Remove  auth-db file at /etc/vmware/vmdkops/auth-db  [root@localhost:/etc/vmware/vmdkops]rm /etc/vmware/vmdkops/auth-db  Step 2: Verify \u201ctenant ls\u201d command  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list \n------------------------------------  --------  ------------------------  -----------------  ------- \n775888a6-6e98-4f41-9ff2-2ab12afd98de  _DEFAULT  This is a default tenant  After this point, the manually upgrade is done, and tenancy operations will succeed.",
            "title": "Case 1: No tenant configured before"
        },
        {
            "location": "/user-guide/faq/#case2-has-tenant-configured-before",
            "text": "Step 1: Backup data manually.  Example below has a tenant  tenant1  with VM  photon4  assigned to this tenant and one volumes: vol1@datastore1 created.  root@photon-JQQBWNwG6 [ ~ ]# docker volume ls\nDRIVER              VOLUME NAME\nvmdk                vol1@datastore1  User needs to manually backup data stored in vol1@datastore1.  Step 2: Move the auth-db file at /etc/vmware/vmdkops/auth-db  [root@localhost:/etc/vmware/vmdkops]mv /etc/vmware/vmdkops/auth-db /etc/vmware/vmdkops/auth-db.backup.v10.upgrade  Step 3: Verify \u201ctenant ls\u201d command, now only   _DEFAULT  should be listed.  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name      Description               Default_datastore  VM_list \n------------------------------------  --------  ------------------------  -----------------  ------- \n775888a6-6e98-4f41-9ff2-2ab12afd98de  _DEFAULT  This is a default tenant                               Step 4: Recreate the tenant configuration with new name \u201cnew-tenant1\u201d (associate the same VM photon4 to this new-tenant1), see the following example:  Note: Please DO NOT create the tenant with the old name \u201ctenant1\u201d!!!  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant create --name=new-tenant1  --vm-list=photon4\ntenant create succeeded\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant access add --name=new-tenant1 --datastore=datastore1  --volume-maxsize=500MB --volume-totalsize=1GB --allow-create\ntenant access add succeeded\n\n[root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py tenant ls\nUuid                                  Name         Description               Default_datastore  VM_list \n------------------------------------  -----------  ------------------------  -----------------  ------- \n775888a6-6e98-4f41-9ff2-2ab12afd98de  _DEFAULT     This is a default tenant                             \nd5964623-f4bd-4fa6-af4f-b7fa7f51ba5e  new-tenant1                            datastore1         photon4   Step 4: Run \u201cdocker volume ls\u201d from VM \u201cphoton4\u201d,  volume which belongs to \u201ctenant1\u201d which was created before will not be visible  root@photon-JQQBWNwG6 [ ~ ]# docker volume ls\nDRIVER              VOLUME NAME  Step 5: Run \u201cdocker volume create\u201d  to create a new volume \u201cnew-tenant1-vol1\u201d and run \u201cdocker volume ls\u201d,   should only able to see this volume which was just created  root@photon-JQQBWNwG6 [ ~ ]# docker volume create --driver=vsphere --name=new-tenant1-vol1 -o size=100MB\nnew-tenant1-vol1\nroot@photon-JQQBWNwG6 [ ~ ]# docker volume ls\nDRIVER              VOLUME NAME\nvmdk                new-tenant1-vol1@datastore1  Volume \u201cvol1\u201d which was created before still exists, and can be seen from the following AdminCLI command  [root@localhost:~] /usr/lib/vmware/vmdkops/bin/vmdkops_admin.py ls\nVolume            Datastore   Created By VM  Created                   Attached To VM  Policy  Capacity  Used      Disk Format  Filesystem Type  Access      Attach As              \n----------------  ----------  -------------  ------------------------  --------------  ------  --------  --------  -----------  ---------------  ----------  ---------------------- \nnew-tenant1-vol1  datastore1  photon4        Mon Aug 29 09:17:01 2016  detached        N/A     100.00MB  13.00MB   thin         ext4             read-write  independent_persistent \nvol1              datastore1  photon4        Mon Aug 29 09:09:18 2016  detached        N/A     100.00MB  100.00MB  thin         ext4             read-write  independent_persistent   Step6: Manually copy the data from backup to the new volume \u201cnew-tenant1-vol1@datastore1\u201d. \nThe path which stores this new volume is \u201c/vmfs/volumes/datastore1/dockvols/new-tenant1\u201d.",
            "title": "Case2:  Has tenant configured before"
        },
        {
            "location": "/blog/2016-9-28/",
            "text": "0.7 Release\n\u00b6\n\n\nWe continue our monthly release cycle with our \nSeptember release\n\n\nThanks to \nBruno Moura\u2019s\n \nwork\n, Docker volume plugin for vSphere now supports selection of file system format when creating a new docker volume.\n\n\nAbility to set a volume \nread-only\n is now supported by the plugin. The \nadmin cli\n allows the admin to set a volume to be read only.\n\n\nComing up\n\u00b6\n\n\nOne of the major features in the pipeline is multi-tenancy and vCenter integration. More about that soon..\n\n\nExternal Blog entries\n\u00b6\n\n\n\n\nCormac Hogan\n\n\nOverview\n\n\nDocker Volume Driver for vSphere\n\n\nDocker Volume Driver for vSphere \u2013 short video\n\n\n\n\n\n\nDocker + VSAN\n\n\nDocker Volume Driver for vSphere on Virtual SAN\n\n\nUsing vSphere docker volume driver to run Project Harbor on VSAN\n\n\nDocker Volume Driver for vSphere using policies on VSAN\n\n\n\n\n\n\n0.7 Release Overview\n\n\nSome nice enhancements to Docker Volume Driver for vSphere v0.7\n\n\n\n\n\n\n\n\n\n\nWilliam Lam\n\n\nGetting Started with Tech Preview of Docker Volume Driver for vSphere - updated\n\n\n\n\n\n\nVirtual Blocks\n\n\nvSphere Docker Volume Driver Brings Benefits of vSphere Storage to Containers\n\n\n\n\n\n\nRyan Kelly\n\n\nHow to use the Docker Volume Driver for vSphere with Photon OS",
            "title": "Release announcement and updates"
        },
        {
            "location": "/blog/2016-9-28/#07-release",
            "text": "We continue our monthly release cycle with our  September release  Thanks to  Bruno Moura\u2019s   work , Docker volume plugin for vSphere now supports selection of file system format when creating a new docker volume.  Ability to set a volume  read-only  is now supported by the plugin. The  admin cli  allows the admin to set a volume to be read only.",
            "title": "0.7 Release"
        },
        {
            "location": "/blog/2016-9-28/#coming-up",
            "text": "One of the major features in the pipeline is multi-tenancy and vCenter integration. More about that soon..",
            "title": "Coming up"
        },
        {
            "location": "/blog/2016-9-28/#external-blog-entries",
            "text": "Cormac Hogan  Overview  Docker Volume Driver for vSphere  Docker Volume Driver for vSphere \u2013 short video    Docker + VSAN  Docker Volume Driver for vSphere on Virtual SAN  Using vSphere docker volume driver to run Project Harbor on VSAN  Docker Volume Driver for vSphere using policies on VSAN    0.7 Release Overview  Some nice enhancements to Docker Volume Driver for vSphere v0.7      William Lam  Getting Started with Tech Preview of Docker Volume Driver for vSphere - updated    Virtual Blocks  vSphere Docker Volume Driver Brings Benefits of vSphere Storage to Containers    Ryan Kelly  How to use the Docker Volume Driver for vSphere with Photon OS",
            "title": "External Blog entries"
        },
        {
            "location": "/blog/2016-10-28/",
            "text": "0.8.1 Release\n\u00b6\n\n\nOctober release is \nout and updated to 0.8.1\n\nThis release includes\n\n\n\n\nMulti tenancy tech preview\n\n\nMulti threaded ESX backend service\n\n\nNumerous bug fixes\n\n\n\n\nTenancy\n\u00b6\n\n\n\n\nFeature\n  Overview\n\n\nTenancy\n  CLI\n\n\n\n\nContainers and persistent storage meetup.\n\u00b6\n\n\nDocker volume plugin was presented at the \nfirst meetup\n of the (Containers and persistent storage meetup group](https://www.meetup.com/Containers-and-persistent-storage/)",
            "title": "0.8.1 Release (Tenancy) and stateful containers meetup"
        },
        {
            "location": "/blog/2016-10-28/#081-release",
            "text": "October release is  out and updated to 0.8.1 \nThis release includes   Multi tenancy tech preview  Multi threaded ESX backend service  Numerous bug fixes",
            "title": "0.8.1 Release"
        },
        {
            "location": "/blog/2016-10-28/#tenancy",
            "text": "Feature\n  Overview  Tenancy\n  CLI",
            "title": "Tenancy"
        },
        {
            "location": "/blog/2016-10-28/#containers-and-persistent-storage-meetup",
            "text": "Docker volume plugin was presented at the  first meetup  of the (Containers and persistent storage meetup group](https://www.meetup.com/Containers-and-persistent-storage/)",
            "title": "Containers and persistent storage meetup."
        }
    ]
}