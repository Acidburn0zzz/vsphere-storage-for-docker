<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="containers@vmware.com">
  
  <title>Advanced Configuration - vSphere Docker Volume Service</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Advanced Configuration";
    var mkdocs_page_input_path = "user-guide/docker-plugin-drivers.md";
    var mkdocs_page_url = "/user-guide/docker-plugin-drivers/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-81413942-1', 'https://vmware.github.io/docker-volume-vsphere/');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> vSphere Docker Volume Service</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Setup</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../install/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Advanced Configuration</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#overview">Overview</a></li>
                
                    <li><a class="toctree-l4" href="#docker-vsphere-volume-driver">Docker vsphere volume driver</a></li>
                
                    <li><a class="toctree-l4" href="#docker-photon-volume-driver">Docker photon volume driver</a></li>
                
                    <li><a class="toctree-l4" href="#configuring-the-docker-volume-plugin">Configuring the Docker Volume Plugin</a></li>
                
                    <li><a class="toctree-l4" href="#sample-plugin-configuration">Sample plugin configuration</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../docker-volume-cli/">Create & manage docker volumes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../datastores/">Multiple Datastores</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../admin-cli/">Admin CLI</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vsphere-overview/">Volume Layout on backend</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Advanced Features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/tenancy/">Tenancy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/vsan-policy/">Policy Management</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/vcenter/">Integration with vCenter</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../faq/">FAQ</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Blog</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../blog/2016-9-28/">Release announcement and updates</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../blog/2016-10-28/">0.8.1 Release (Tenancy) and stateful containers meetup</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">vSphere Docker Volume Service</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Setup &raquo;</li>
        
      
    
    <li>Advanced Configuration</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>The Docker volume plugin supports the below platforms and the corresponding drivers for those. The plugin supports all volume provisioning and managenment operations, defined by the Docker Volume plugin interface, on both platforms. Both drivers allow users to provision and use VMDK backed volumes for containers in Docker.</p>
<ol>
<li>vSphere</li>
<li>Photon</li>
</ol>
<script type="text/javascript" src="https://asciinema.org/a/80417.js" id="asciicast-80417" async></script>

<h2 id="docker-vsphere-volume-driver">Docker vsphere volume driver<a class="headerlink" href="#docker-vsphere-volume-driver" title="Permanent link">&para;</a></h2>
<p>The Docker vsphere volume driver supports provisioning and managing docker volumes on a standalone or cluster of ESX servers via a service (ESX service) that&rsquo;s installed and runs on each server. Docker volumes are created and managed via publicly available VIM (Virtual Infrastructure Management) APIs on the ESX host.</p>
<h2 id="docker-photon-volume-driver">Docker photon volume driver<a class="headerlink" href="#docker-photon-volume-driver" title="Permanent link">&para;</a></h2>
<p>The Docker photon volume driver supports provisioning and managing docker volumes on a Photon platform consisting of a cluster of ESX hosts managed via a Photon controller instance. Docker volumes are created and managed entirely via the open Photon platform API via the Photon controller.</p>
<p>The Docker Volume plugin can support either or both types of volumes, as required, on a given Docker host.</p>
<h2 id="configuring-the-docker-volume-plugin">Configuring the Docker Volume Plugin<a class="headerlink" href="#configuring-the-docker-volume-plugin" title="Permanent link">&para;</a></h2>
<p>The docker volume plugin loads runtime options and values from a json configuration file (default <code>/etc/docker-volume-vsphere.conf</code>) on the host. The user can override the default configuration by providing a different configuration file, via the <code>--config</code> option, specifying the full path of the file. Options that are currently recognized include the below set. Options passed on the command line override those in the configuration file.</p>
<h3 id="selecting-the-driver-to-handle-volume-operations">Selecting the driver to handle volume operations<a class="headerlink" href="#selecting-the-driver-to-handle-volume-operations" title="Permanent link">&para;</a></h3>
<p>The docker volume plugin supports two drivers, namely, <code>photon</code> and <code>vsphere</code> for the Photon and vSphere platforms respectively. The <code>vsphere</code> driver was earlier named as <code>vmdk</code> and the plugin still supports both names. The <code>vmdk</code> driver name can be used in place of <code>vsphere</code> for now, but will be deprecated in a later release. The choice of driver is specified as below in the <a href="#sample-plugin-configuration">sample configuration</a>. The plugin uses <code>vsphere</code> as the default driver, which is overriden via the configuration file.</p>
<h3 id="options-for-the-photon-volume-driver">Options for the photon volume driver<a class="headerlink" href="#options-for-the-photon-volume-driver" title="Permanent link">&para;</a></h3>
<ul>
<li>Target    - URL at which to contact the Photon Controller</li>
<li>Project   - project ID in Photon to which the docker host belongs</li>
<li>Host      - ID of the docker host VM in Photon</li>
</ul>
<h3 id="options-for-logging">Options for logging<a class="headerlink" href="#options-for-logging" title="Permanent link">&para;</a></h3>
<ul>
<li>LogLevel      - logging level for the plugin</li>
<li>LogPath       - location where plugin log fils are created</li>
<li>MaxLogSizeMb  - max. size of the plugin log file</li>
<li>MaxLogAgeDays - number of days to retain plugin log files</li>
</ul>
<h2 id="sample-plugin-configuration">Sample plugin configuration<a class="headerlink" href="#sample-plugin-configuration" title="Permanent link">&para;</a></h2>
<pre><code>{
    &quot;Driver&quot;: &quot;&lt;driver name - vsphere/vmdk/photon&gt;&quot;
    &quot;MaxLogAgeDays&quot;: 28,
    &quot;MaxLogSizeMb&quot;: 100,
    &quot;LogPath&quot;: &quot;/var/log/docker-volume-vsphere.log&quot;,
    &quot;LogLevel&quot;: &quot;info&quot;,
    &quot;Target&quot; : &quot;http://&lt;photon_controller_ip&gt;:&lt;target port&gt;&quot;,
    &quot;Project&quot; : &quot;&lt;21-digit photon project ID&gt;&quot;,
    &quot;Host&quot; : &quot;&lt;32-digit photon VM ID &quot;
}
</code></pre>

<p>Note:</p>
<ol>
<li>The current version of the Photon volume plugin doesn&rsquo;t support authentication as yet, this will be added up in a subsequent release.</li>
<li>The &ldquo;target port&rdquo; is set to &ldquo;9000&rdquo; if authentication isn&rsquo;t enabled in photon controller, else port &ldquo;443&rdquo; is used.</li>
<li>Both project and VM IDs mentioned above can be obtained via the &ldquo;photon&rdquo; CLI, see https://github.com/vmware/photon-controller/wiki/Compile-Photon-Controller-CLI.</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../docker-volume-cli/" class="btn btn-neutral float-right" title="Create & manage docker volumes">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../install/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../install/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../docker-volume-cli/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
