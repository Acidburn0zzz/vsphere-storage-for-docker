<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>FAQs | vSphere Docker Volume Service</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/infracloudio-lavish-bootstrap.css">
<link rel="stylesheet" href="css/vmware-customstyles.css">
<link rel="stylesheet" href="css/infracloudio-theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>


</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> vSphere Docker Volume Service</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->



                <li><a href="index.html">Home</a></li>



                <li class="active"><a href="faq.html">FAQs</a></li>



                <li><a href="contactus.html">Contact Us</a></li>



                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->


                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Downloads<b class="caret"></b></a>
                    <ul class="dropdown-menu">


                        <li><a href="https://store.docker.com/plugins/vsphere-docker-volume-service" target="_blank">Docker Plugin</a></li>



                        <li><a href="https://bintray.com/vmware/vDVS/VIB/_latestVersion" target="_blank">VIB</a></li>



                        <li><a href="https://bintray.com/vmware/vDVS/vDVS_RPM/_latestVersion" target="_blank">RPM</a></li>



                        <li><a href="https://bintray.com/vmware/vDVS/vDVS_DEB/_latestVersion" target="_blank">DEB</a></li>


                    </ul>
                </li>



                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="FAQs">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">














<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Menu </li>



    <li>
        <a href="#">Get Started</a>
        <ul>



            <li><a href="index.html">Introduction</a></li>




        </ul>



    <li>
        <a href="#">Setup</a>
        <ul>



            <li><a href="prerequisite.html">Prerequsites</a></li>






            <li><a href="install.html">Installation</a></li>






            <li><a href="configuration.html">Configuration</a></li>




        </ul>



    <li>
        <a href="#">User Guide</a>
        <ul>



            <li><a href="docker-volume-cli.html">Docker Volume Management</a></li>






            <li><a href="vfile-plugin.html">vFile Volume Plugin for Docker</a></li>






            <li><a href="docker-compatibility.html">Docker Compatibility</a></li>




        </ul>



    <li>
        <a href="#">Admin Guide</a>
        <ul>



            <li><a href="datastores.html">Datastores Support</a></li>






            <li><a href="admin-cli.html">Admin CLI Reference</a></li>






            <li><a href="tenancy.html">Multi-tenancy Support</a></li>






            <li><a href="policy-based-management.html">Storage Policy Based Management</a></li>




        </ul>



    <li>
        <a href="#">Applications & Examples</a>
        <ul>



            <li><a href="demo-wordpress-app.html">Wordpress application with MariaDB</a></li>






            <li><a href="demo-ha-swarm.html">HA DB in Docker Swarm mode</a></li>






            <li><a href="docker-service.html">Running MongoDB (Docker Service) with vSphere volume</a></li>






            <li><a href="docker-stacks.html">Running an Example App with Docker Stacks</a></li>






            <li><a href="s3-object-storage.html">S3 Object storage with vDVS</a></li>




        </ul>



    <li>
        <a href="#">Miscellaneous</a>
        <ul>



            <li><a href="blogs.html">Blogs</a></li>






            <li><a href="Interop.html">Interop with vSphere features</a></li>






            <li><a href="known-issues.html">Known Issues</a></li>




        </ul>



        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">FAQs</h1>
</div>



<div class="post-content">





<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>






<a target="_blank" href="https://github.com/vmware/vsphere-storage-for-docker/edit/master/docs/external//faq.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>



  <h2 id="general">General</h2>

<h3 id="where-do-i-get-the-binaries-what-about-the-source">Where do I get the binaries? What about the source?</h3>
<p>Please look at <a href="https://github.com/vmware/vsphere-storage-for-docker/releases">GitHub Releases</a> for binaries. Github releases allow downloading of source for a release in addition to git clone.</p>

<h3 id="how-to-install-and-use-the-driver">How to install and use the driver?</h3>
<p>Please follow the instructions at <a href="http://vmware.github.io/vsphere-storage-for-docker/documentation/install.html#installation-on-esxi">installation-on-esxi</a>.</p>

<h3 id="how-do-i-run-the-setup-on-my-laptop">How do I run the setup on my laptop?</h3>
<p>Follow the <a href="https://github.com/vmware/vsphere-storage-for-docker/wiki/Using-laptop-for-running-the-entire-stack">guide on the wiki</a></p>

<h3 id="how-do-i-bind-a-volume-to-a-particular-container-host">How do I bind a volume to a particular container host?</h3>
<p>This can be achieved via <a href="http://vmware.github.io/vsphere-storage-for-docker/documentation/tenancy.html">Tenancy</a>.</p>

<h3 id="how-do-i-mount-vsphere-volume-when-there-are-volumes-with-the-same-name-created-on-the-different-datastores">How do I mount vSphere volume when there are volumes with the same name created on the different datastores?</h3>
<p>If there are volumes with the same name on different datastores then use the long name (e.g. <code class="highlighter-rouge">myVolume@vsanDatastore</code>). Let’s take an example as shown below, full volume name should be passed while mounting the volume.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>root@sc-rdops-vm02-dhcp-52-237:~# docker volume ls
DRIVER              VOLUME NAME
vsphere:latest      myVolume@sharedVmfs-0
vsphere:latest      myVolume@vsanDatastore
</code></pre>
</div>

<h3 id="can-i-migrate-data-between-linux-and-windows-containers">Can I migrate data between Linux and Windows containers?</h3>
<p>Volumes created via the Linux plugin are formatted with ext4 by default, and the ones created via the Windows plugin are formatted with NTFS. While it is possible to cross-mount such volumes, the vSphere Storage for Docker plugin doesn’t support such cases, nor does it provide any explicit help.</p>

<h3 id="which-release-i-should-use">Which release I should use?</h3>
<p>You can choose release based on your needs. There will be two types of releases: edge release and stable release.</p>

<p>Edge release: A monthly release with new features and bug fixes.</p>

<p>Stable release: A quarterly release with reliable/stable updates.</p>

<p>Please refer <a href="https://github.com/vmware/vsphere-storage-for-docker/blob/master/CONTRIBUTING.md#release-naming-convention">release convention</a> for more details.</p>

<h3 id="can-i-use-the-full-volume-like-voldatastore-in-compose-file-with-vdvs">Can I use the full volume like “vol@datastore” in compose file with VDVS?</h3>
<p>Yes, it is supported starting from Docker 17.09-ce release and compose 3.4. Please refer to this <a href="https://github.com/vmware/vsphere-storage-for-docker/blob/master/docs/external/docker-stacks.md">example</a>.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="docker-service-to-esx-backend-communication">Docker Service to ESX Backend Communication.</h3>

<h4 id="what-is-vmci-and-vsock-and-why-is-it-needed">What is VMCI and vSock and why is it needed?</h4>

<p>vSphere Docker Volume Service uses VMCI and vSock to communicate with the hypervisor to implement the volume operations. It comes installed on Photon OS and on Ubuntu follow <a href="http://pubs.vmware.com/vsphere-60/index.jsp#com.vmware.vsphere.vm_admin.doc/GUID-08BB9465-D40A-4E16-9E15-8C016CC8166F.html#GUID-08BB9465-D40A-4E16-9E15-8C016CC8166F">VMware tools installation</a> or use open vmtools
<code class="highlighter-rouge">apt-get install open-vm-tools</code>.
Additional reading for differences between VMware tools and open vm tools:</p>

<ul>
  <li><a href="http://blogs.vmware.com/vsphere/2015/09/open-vm-tools-ovt-the-future-of-vmware-tools-for-linux.html">Open-VM-Tools (OVT): The Future Of VMware Tools For Linux</a></li>
  <li><a href="http://superuser.com/questions/270112/open-vm-tools-vs-vmware-tools">VMware Tools vs Open VM Tools</a></li>
</ul>

<h4 id="i-see-connection-reset-by-peer-errno104-in-the-services-logshttpsgithubcomvmwarevsphere-storage-for-dockerlogging-what-is-the-cause">I see “connection reset by peer (errno=104)” in the <a href="https://github.com/vmware/vsphere-storage-for-docker#logging">service’s logs</a>, what is the cause?</h4>
<p>104 is a standard linux error (<code class="highlighter-rouge">#define ECONNRESET      104     /* Connection reset by peer */</code>)</p>

<p>It occurs if the Docker volume service cannot communicate to the ESX back end. This can happen if:
   * VMCI and/or vSock kernel modules are not loaded or the kernel does not support VMCI and vSock. Please read “What is VMCI and vSock and why is it needed?” above.
   * ESX service is not running. <code class="highlighter-rouge">/etc/init.d/vmdk-opsd status</code>. Check <a href="https://github.com/vmware/vsphere-storage-for-docker#logging">ESX Logs</a>
   * ESX service and the docker volume service are not communicating on the same port. <code class="highlighter-rouge">ps -c | grep vmdk #On ESX</code> and <code class="highlighter-rouge">ps aux| grep vsphere-storage-for-docker # On VM</code> check the port param passed in and make sure they are the same</p>

<h4 id="i-see-address-family-not-supported-by-protocol-errno97-in-the-services-logshttpsgithubcomvmwarevsphere-storage-for-dockerlogging-what-is-the-cause">I see “address family not supported by protocol (errno=97)” in the <a href="https://github.com/vmware/vsphere-storage-for-docker#logging">service’s logs</a>, what is the cause?</h4>
<p>97 is a standard linux error (<code class="highlighter-rouge">#define EAFNOSUPPORT    97      /* Address family not supported by protocol */</code>)</p>

<p>It occurs if the linux kernel does not know about the AF family used for VMCI communication. Please read <a href="https://vmware.github.io/vsphere-storage-for-docker/user-guide/faq/#what-is-vmci-and-vsock-and-why-is-it-needed">“What is VMCI and vSock and why is it needed?”</a> above.</p>

<h4 id="i-see-plugin-not-found-error-message-in-the-docker-daemon-logs-what-is-the-cause">I see “plugin not found” error message in the Docker daemon logs, what is the cause?</h4>
<p>This is the limitation of docker and being tracked at <a href="https://github.com/moby/moby/issues/34545">issue#34545</a>.</p>

<p>Docker maintains a unique plugin ID that’s assigned when the plugin is installed. Once assigned the ID remains with the plugin till its removed. All volumes that were created via the plugin will remain inaccessible if the plugin is removed. The correct way to install updates to the plugin is to upgrade the plugin using <code class="highlighter-rouge">docker plugin upgrade</code> as mentioned at <a href="http://vmware.github.io/vsphere-storage-for-docker/documentation/install.html#upgrade-instructions">user guide</a>.</p>

<h4 id="volume-remains-attached-to-the-vm-after-upgrading-vdvs-esx-driver">Volume remains attached to the VM after upgrading VDVS ESX driver</h4>
<p>If the container using volumes exits during the upgrade of ESX driver (i.e. after vib remove but before vib install), the volumes may remain attached to VM. In such a case, please disable and then enable (restart) the volume plugin to ensure volumes are properly detached.</p>

<h4 id="im-not-able-to-create-volume-after-upgrading-to-vdvs-managed-plugin-what-is-the-cause">I’m not able to create volume after upgrading to VDVS managed plugin, what is the cause?</h4>
<div class="highlighter-rouge"><pre class="highlight"><code># docker volume create -d vsphere vol5
Error response from daemon: create vol5: Post http://%2Frun%2Fdocker%2Fplugins%2Fvsphere.sock/VolumeDriver.Create: dial unix /run/docker/plugins/vsphere.sock: connect: no such file or directory
</code></pre>
</div>

<p>Restart docker service is required.</p>

<p>e.g.
<code class="highlighter-rouge">
systemctl restart docker
</code></p>

<h4 id="im-not-able-to-create-volume-and-i-see-volumedrivercreate-device-not-found-error">I’m not able to create volume and I see “VolumeDriver.Create: Device not found” error</h4>

<p>From 0.19 release of VDVS, the plugin has to have a VIB that’s at least 0.19 or later.  <a href="https://github.com/vmware/vsphere-storage-for-docker/issues/2023">#2023</a>
Ideally it is better if you always upgrade both the plugin and the VIB to matching versions.</p>



    <div class="tags">

    </div>



</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 VMWare. All rights reserved. <br />
 Site last generated: Dec 15, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>